<script setup lang="ts">
import { computed } from 'vue'

const props = defineProps<{
  show: boolean
  title: string
  message: string
  type: string // gaming, study, social, other, death, success
}>()

const emit = defineEmits<{
  close: []
}>()

// ÂõæÊ†áÊò†Â∞ÑÔºö‰ΩøÁî®Êõ¥Êúâ‰ª£ÂÖ•ÊÑüÁöÑ Emoji ÊàñÂõæÊ†á
const icon = computed(() => {
  switch (props.type) {
    case 'death': return 'ü™¶'; // Â¢ìÁ¢ëÔºåÊõ¥ÂÖ∑Ê≠¶‰æ†Ê≠ª‰∫°ÊÑü
    case 'success': return 'üèÜ';
    case 'gaming': return '‚öîÔ∏è'; // Ââë
    case 'study': return 'üìú'; // Âç∑ËΩ¥
    case 'social': return 'üç∂'; // ÈÖíÂ£∂
    case 'other': return 'üîÆ'; // Ê∞¥Êô∂ÁêÉ/Â•áÈÅá
    default: return '‚ú®';
  }
})

// ‰∏ªÈ¢òÊò†Â∞ÑÔºöËøîÂõû‰∏ÄÂ•óÂÆåÊï¥ÁöÑÈ¢úËâ≤ÊñπÊ°à
const theme = computed(() => {
  switch (props.type) {
    case 'death':
      return {
        wrapperBorder: 'border-red-900/50',
        wrapperShadow: 'shadow-[0_0_50px_rgba(220,38,38,0.2)]',
        bgGradient: 'from-red-950/90 to-[#0F1115]',
        iconBg: 'bg-red-900/20',
        iconBorder: 'border-red-500/30',
        iconGlow: 'bg-red-600/30',
        titleColor: 'text-red-500',
        buttonClass: 'bg-gradient-to-r from-red-800 to-red-600 hover:from-red-700 hover:to-red-500 text-red-100 shadow-red-900/50'
      }
    case 'success':
      return {
        wrapperBorder: 'border-emerald-500/30',
        wrapperShadow: 'shadow-[0_0_50px_rgba(16,185,129,0.2)]',
        bgGradient: 'from-emerald-950/90 to-[#0F1115]',
        iconBg: 'bg-emerald-900/20',
        iconBorder: 'border-emerald-400/30',
        iconGlow: 'bg-emerald-500/30',
        titleColor: 'text-emerald-400',
        buttonClass: 'bg-gradient-to-r from-emerald-700 to-emerald-500 hover:from-emerald-600 hover:to-emerald-400 text-emerald-50 shadow-emerald-900/50'
      }
    case 'gaming': // ÊàòÊñó/Ê≠¶Â≠¶
      return {
        wrapperBorder: 'border-cyan-500/30',
        wrapperShadow: 'shadow-[0_0_50px_rgba(6,182,212,0.2)]',
        bgGradient: 'from-cyan-950/90 to-[#0F1115]',
        iconBg: 'bg-cyan-900/20',
        iconBorder: 'border-cyan-400/30',
        iconGlow: 'bg-cyan-500/30',
        titleColor: 'text-cyan-400',
        buttonClass: 'bg-gradient-to-r from-cyan-700 to-blue-600 hover:from-cyan-600 hover:to-blue-500 text-cyan-50 shadow-cyan-900/50'
      }
    case 'study': // ‰øÆÁÇº
      return {
        wrapperBorder: 'border-teal-500/30',
        wrapperShadow: 'shadow-[0_0_50px_rgba(20,184,166,0.2)]',
        bgGradient: 'from-teal-950/90 to-[#0F1115]',
        iconBg: 'bg-teal-900/20',
        iconBorder: 'border-teal-400/30',
        iconGlow: 'bg-teal-500/30',
        titleColor: 'text-teal-400',
        buttonClass: 'bg-gradient-to-r from-teal-700 to-teal-500 hover:from-teal-600 hover:to-teal-400 text-teal-50 shadow-teal-900/50'
      }
    case 'social': // Ê±üÊπñ
      return {
        wrapperBorder: 'border-violet-500/30',
        wrapperShadow: 'shadow-[0_0_50px_rgba(139,92,246,0.2)]',
        bgGradient: 'from-violet-950/90 to-[#0F1115]',
        iconBg: 'bg-violet-900/20',
        iconBorder: 'border-violet-400/30',
        iconGlow: 'bg-violet-500/30',
        titleColor: 'text-violet-400',
        buttonClass: 'bg-gradient-to-r from-violet-700 to-purple-600 hover:from-violet-600 hover:to-purple-500 text-violet-50 shadow-violet-900/50'
      }
    case 'other': // Â•áÈÅá/ÈªòËÆ§
    default:
      return {
        wrapperBorder: 'border-amber-500/30',
        wrapperShadow: 'shadow-[0_0_50px_rgba(245,158,11,0.2)]',
        bgGradient: 'from-amber-950/90 to-[#0F1115]',
        iconBg: 'bg-amber-900/20',
        iconBorder: 'border-amber-400/30',
        iconGlow: 'bg-amber-500/30',
        titleColor: 'text-amber-400',
        buttonClass: 'bg-gradient-to-r from-amber-700 to-orange-600 hover:from-amber-600 hover:to-orange-500 text-amber-50 shadow-amber-900/50'
      }
  }
})
</script>

<template>
  <Teleport to="body">
    <Transition
      enter-active-class="transition-opacity duration-300"
      enter-from-class="opacity-0"
      enter-to-class="opacity-100"
      leave-active-class="transition-opacity duration-200"
      leave-from-class="opacity-100"
      leave-to-class="opacity-0"
    >
      <!-- ÈÅÆÁΩ©Â±ÇÔºöÊõ¥Ê∑±ÁöÑÈªëËâ≤ÔºåÂº∫Ë∞ÉÊ≤âÊµ∏ÊÑü -->
      <div
        v-if="show"
        class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md"
      >
        <Transition
          enter-active-class="transition-all duration-500 cubic-bezier(0.16, 1, 0.3, 1)"
          enter-from-class="opacity-0 scale-90 translate-y-8"
          enter-to-class="opacity-100 scale-100 translate-y-0"
          leave-active-class="transition-all duration-300 ease-in"
          leave-from-class="opacity-100 scale-100"
          leave-to-class="opacity-0 scale-95"
        >
          <!-- Âç°ÁâáÊú¨‰Ωì -->
          <div
            v-if="show"
            class="relative w-full max-w-md overflow-hidden rounded-2xl border backdrop-blur-xl"
            :class="[theme.wrapperBorder, theme.wrapperShadow]"
          >
            <!-- ËÉåÊôØÂÖâÊïà -->
            <div class="absolute inset-0 bg-gradient-to-b" :class="theme.bgGradient"></div>
            
            <!-- Âô™ÁÇπÁ∫πÁêÜ -->
            <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-[0.05] pointer-events-none"></div>

            <div class="relative p-8 text-center flex flex-col items-center">
              
              <!-- ÂõæÊ†áÂÆπÂô®ÔºöÂæΩÁ´†È£éÊ†º -->
              <div class="relative w-24 h-24 mb-6 group cursor-default">
                 <!-- ÂëºÂê∏ÂÖâÁéØ -->
                 <div class="absolute inset-0 rounded-full blur-xl animate-pulse-slow" :class="theme.iconGlow"></div>
                 <!-- Ê†∏ÂøÉ -->
                 <div class="relative w-full h-full rounded-full border-2 flex items-center justify-center text-5xl shadow-2xl" 
                   :class="[theme.iconBg, theme.iconBorder]"
                 >
                    <span class="filter drop-shadow-md transform group-hover:scale-110 transition-transform duration-500">{{ icon }}</span>
                 </div>
              </div>

              <!-- Ê†áÈ¢òÔºöÂ¢ûÂä†Ë£ÖÈ•∞Á∫ø -->
              <div class="flex items-center gap-3 w-full mb-4 opacity-80">
                 <div class="h-[1px] flex-1 bg-gradient-to-r from-transparent to-slate-500/50"></div>
                 <h2 class="text-2xl font-bold tracking-wider" :class="theme.titleColor">{{ title }}</h2>
                 <div class="h-[1px] flex-1 bg-gradient-to-l from-transparent to-slate-500/50"></div>
              </div>

              <!-- Ê∂àÊÅØÊñáÊú¨ -->
              <p class="text-slate-300 text-sm leading-relaxed mb-8 whitespace-pre-line font-medium opacity-90">
                {{ message }}
              </p>

              <!-- Êìç‰ΩúÊåâÈíÆÔºöÊµÅÂÖâÊïàÊûú -->
              <button
                @click="emit('close')"
                class="relative w-full py-3.5 rounded-xl font-bold text-sm uppercase tracking-[0.1em] transition-all transform hover:-translate-y-1 hover:shadow-xl active:scale-[0.98] overflow-hidden group shadow-lg"
                :class="theme.buttonClass"
              >
                <!-- ÊåâÈíÆÂÜÖÂÆπ -->
                <span class="relative z-10 flex items-center justify-center gap-2">
                   <span>{{ type === 'death' ? 'ËÉúË¥•‰πÉÂÖµÂÆ∂Â∏∏‰∫ã' : 'ÁªßÁª≠ÂæÅÁ®ã' }}</span>
                   <svg class="w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
                </span>
                
                <!-- ÂÜÖÈÉ®ÊµÅÂÖâ -->
                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:animate-shine"></div>
              </button>

            </div>
          </div>
        </Transition>
      </div>
    </Transition>
  </Teleport>
</template>

<style scoped>
/* ÊÖ¢ÈÄüÂëºÂê∏ */
@keyframes pulseSlow {
  0%, 100% { transform: scale(1); opacity: 0.5; }
  50% { transform: scale(1.1); opacity: 0.8; }
}
.animate-pulse-slow {
  animation: pulseSlow 3s ease-in-out infinite;
}

/* ÊåâÈíÆÊâ´ÂÖâ */
@keyframes shine {
  100% { transform: translateX(100%); }
}
.animate-shine {
  animation: shine 0.6s linear;
}
</style>
