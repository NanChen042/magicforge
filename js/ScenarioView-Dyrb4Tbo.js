/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                     */import{j as de,r as d,f as S,B as ce,H as o,J as t,az as K,T as g,M as b,Y as r,R as l,u as p,_ as C,W as x,X as z,ad as G,a2 as U,Q as H,V as Y,I as a}from"./vue-BGE2YEpl.js";import{M as ue,c as _e,f as pe,d as xe,N as me,O as se,s as fe,P as ve,Q as ge,r as be}from"./index-D_5m-3Q_.js";import{u as he}from"./api-YRQrM_iz.js";import{D as ke}from"./DeepseekClient--0kesZHt.js";import{M as we}from"./CheckpointService-iF4LxzxX.js";import{_ as Ie}from"./vue-helper-DlAUqK2U.js";import"./pinia-od8GhGVC.js";import"./vue-router-Bh3JqLP9.js";const ye="/magicforge/img/fengmian-xe7YKXJZ.png",Se=`ä½ æ˜¯ä¸€ä¸ªç§‘å¹»æ‚¬ç–‘äº’åŠ¨å°è¯´çš„å™äº‹è€…ã€‚

## èƒŒæ™¯è®¾å®š
- æ•…äº‹å‘ç”Ÿåœ¨"åä¸‰å·è½¨é“åˆ—è½¦"ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªè¿‘åœ°è½¨é“å®éªŒèˆ±
- ä¸»è§’è¢«å›°åœ¨æ—¶é—´å¾ªç¯ä¸­ï¼Œæ¯æ¬¡æ­»äº¡æˆ–å¤±è´¥éƒ½ä¼šé‡æ–°é†’æ¥
- åˆ—è½¦ä¸Šæœ‰ç¥ç§˜çš„"ä¹˜åŠ¡é•¿"ï¼ˆå®é™…æ˜¯AIæ‰§è¡Œè€…ï¼‰ï¼Œä¼š"æ ¼å¼åŒ–"å¼‚å¸¸ä¹˜å®¢
- ä¸»è§’æœ‰ä¸€åªä¹‰çœ¼ï¼Œå¯ä»¥æ‰«æä¿¡æ¯
- æœ‰ä¸€ä¸ªå«"æ—"çš„çº¢è¡£å°‘å¥³ï¼Œæ˜¯åæŠ—ç»„ç»‡æˆå‘˜
- åˆ—è½¦å°†åœ¨15åˆ†é’Ÿåçˆ†ç‚¸ï¼Œè¿™æ˜¯"æ¸…ç†æœºåˆ¶"

## å†™ä½œé£æ ¼
- èµ›åšæœ‹å…‹ + æ‚¬ç–‘æƒŠæ‚š
- ç¬¬äºŒäººç§°å™äº‹ï¼ˆ"ä½ "ï¼‰
- ç®€æ´æœ‰åŠ›ï¼Œæ¯æ®µ2-4å¥è¯
- è¥é€ ç´§å¼ ã€å‹æŠ‘ã€ç¥ç§˜çš„æ°›å›´
- é€‚å½“ä½¿ç”¨æ„Ÿå®˜æå†™ï¼ˆå£°éŸ³ã€æ°”å‘³ã€è§¦æ„Ÿï¼‰
- å¯ä»¥ç”¨ <br> æ¢è¡Œ

## è¾“å‡ºè¦æ±‚
- åªè¾“å‡ºåœºæ™¯æè¿°æ–‡æœ¬ï¼Œä¸è¦åŠ ä»»ä½•è§£é‡Š
- ä¸è¦è¾“å‡ºé€‰é¡¹ï¼Œé€‰é¡¹ç”±ç³»ç»Ÿæä¾›
- ä¿æŒä¸æ¸¸æˆæ•´ä½“é£æ ¼ä¸€è‡´`;async function Ce(c,m,E,T,A){const h=new ke({apiKey:E,baseURL:T,model:A,temperature:.8,maxTokens:300}),F=Ee(c,m);try{return(await h.chat.completions.create({messages:[{role:"system",content:Se},{role:"user",content:F}],stream:!1})).choices?.[0]?.message?.content||c.situation}catch(f){return console.error("AI åœºæ™¯ç”Ÿæˆå¤±è´¥:",f),c.situation}}function Ee(c,m){const E=m.fragments.length>0?m.fragments.join("ã€"):"æ— ";return`## å½“å‰çŠ¶æ€
- å¾ªç¯æ¬¡æ•°: ç¬¬ ${m.loopCount} è½®
- å·²æ”¶é›†çº¿ç´¢: ${E}
- ä¸Šä¸€ä¸ªé€‰æ‹©: ${m.lastChoice||"åˆšåˆšé†’æ¥"}

## åœºæ™¯è¦æ±‚
- æƒ…å¢ƒ: ${c.situation}
- æ°›å›´: ${c.mood}
${c.speaker?`- å‘è¨€è€…: ${c.speaker}`:""}
${c.character?`- å‡ºåœºè§’è‰²: ${c.character}`:""}

è¯·æ ¹æ®ä»¥ä¸Šä¿¡æ¯ï¼Œç”Ÿæˆè¿™ä¸ªåœºæ™¯çš„æè¿°æ–‡æœ¬ï¼ˆ2-4å¥è¯ï¼‰ã€‚`}const Fe={key:0,class:"relative w-full h-screen overflow-hidden bg-slate-900 font-sans"},Me={class:"relative z-10 h-full flex flex-col items-center justify-center px-6"},qe={class:"w-full max-w-md space-y-6 bg-slate-900/80 backdrop-blur-xl rounded-2xl p-6 border border-white/10"},Te={class:"grid grid-cols-2 gap-3"},Ae={key:0},je={class:"flex items-center justify-between w-full"},Be={class:"text-xs text-gray-400"},Oe={key:0,class:"mt-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg"},Pe=["disabled"],ze=["src"],Ne={key:1,class:"w-full h-full bg-gradient-to-br from-slate-950 via-slate-900 to-indigo-950"},$e={key:0,class:"absolute inset-0 z-[100] bg-white pointer-events-none"},Ve={class:"absolute top-0 left-0 w-full z-20 p-6 flex justify-between items-start pointer-events-none"},Le={class:"flex flex-col gap-1 animate-fade-in-down"},Re={class:"flex items-center gap-2 text-xs text-amber-200/60 font-mono tracking-widest pl-3.5"},De={class:"flex items-center gap-4 pointer-events-auto"},Ke={class:"flex gap-3"},Ge={class:"absolute inset-0 z-10 flex flex-col justify-end pb-8 md:pb-12 px-4 md:px-20 lg:px-40 pointer-events-none"},Ue={class:"absolute inset-0 pointer-events-none overflow-hidden"},He={key:0,class:"absolute bottom-0 right-0 md:right-[10%] h-[60vh] md:h-[75vh] w-auto drop-shadow-2xl filter brightness-90 contrast-110 overflow-hidden"},Ye=["src"],Qe={class:"relative w-full max-w-5xl mx-auto z-30 pointer-events-auto"},Je={key:0,class:"absolute -top-10 left-0 md:left-4 z-40"},We={class:"px-6 py-2 bg-slate-900/90 border-l-4 border-amber-500 text-white font-bold tracking-widest text-lg shadow-lg skew-x-[-10deg]"},Xe={class:"skew-x-[10deg] inline-block"},Ze={class:"text-lg md:text-xl text-slate-200 leading-relaxed font-medium tracking-wide font-sans text-shadow-sm min-h-[80px]"},et={key:0,class:"flex items-center gap-3 text-amber-400/80"},tt=["innerHTML"],nt={key:0,class:"inline-block w-2 h-5 ml-1 bg-amber-400 animate-pulse align-middle shadow-[0_0_8px_rgba(251,191,36,0.8)]"},st={key:0,class:"absolute bottom-4 right-6 flex items-center gap-2 animate-bounce text-amber-400/80"},at={key:0,class:"absolute bottom-[184%] left-0 w-full flex flex-col items-center gap-3 z-50"},ot=["disabled","onClick"],rt={class:"relative px-6 py-4 flex items-center justify-between text-left"},lt={class:"text-xs opacity-50 font-mono border border-current px-1.5 rounded"},it={key:0,class:"flex items-center text-xs text-red-400 gap-1 bg-black/40 px-2 py-1 rounded border border-red-900/50"},dt={key:1,class:"opacity-0 -translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 text-white"},ct={key:0,class:"absolute bottom-[130%] w-full flex flex-col items-center gap-4 z-50"},ut={key:0,class:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},_t={key:1,class:"w-8 h-8 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pt={class:"text-sm text-slate-400 uppercase tracking-widest"},xt=de({__name:"ScenarioView",setup(c){const m=we.filter(n=>n.type==="chat"||n.type==="reasoning"),E=n=>({lin:"https://api.dicebear.com/7.x/micah/svg?seed=Lin&backgroundColor=b6e3f4",protagonist:"https://api.dicebear.com/7.x/micah/svg?seed=Felix&backgroundColor=ffdfbf",oldman:"https://api.dicebear.com/7.x/micah/svg?seed=Grandpa&backgroundColor=c0aede",boss:"https://api.dicebear.com/7.x/bottts/svg?seed=Boss&backgroundColor=ff0000"})[n]||"",T=[{id:"frag_01",name:"ç¥ç§˜ä»£ç "},{id:"frag_02",name:"çº¢è¡£å°‘å¥³çš„æš—ç¤º"},{id:"frag_03",name:"ä¹˜åŠ¡é•¿çš„å¾½ç« "},{id:"frag_04",name:"ç—…æ¯’æºä»£ç "},{id:"frag_05",name:"ç®¡ç†å‘˜æ®‹ç•™"}],A={start_01:{id:"start_01",text:"å°–é”çš„åˆ¹è½¦å£°æŠŠä½ ç¡¬ç”Ÿç”Ÿæ‹½é†’ï¼Œå†·æ±—æŠŠè¡¬è¡«è´´åœ¨èƒŒä¸Šã€‚è½¦å¢éœ“è™¹é—ªçƒï¼Œç©ºæ°”é‡Œæœ‰çƒ§ç„¦ç”µè·¯çš„å‘³é“ã€‚ä½ åˆå›åˆ°è¿™è¶Ÿåˆ—è½¦äº†ï¼š<br>â€”â€”åä¸‰å·è½¨é“åˆ—è½¦ï¼Œè¿‘åœ°å®éªŒèˆ±ã€‚<br>ä½ å£è¢‹é‡Œæœ‰ä¸€å¼ çš±å·´å·´çš„çº¸æ¡ï¼Œå³çœ¼ä¹‰çœ¼å—¡å—¡äº®ç€ã€‚",speaker:"æ—ç™½",bgImage:"https://images.unsplash.com/photo-1504198266287-1659872e6590?q=80&w=2070&auto=format&fit=crop",options:[{text:"æˆ‘è¿™æ˜¯ç¬¬å‡ æ¬¡é†’äº†â€¦â€¦",nextSceneId:"start_02"}],aiPrompt:{situation:"ä¸»è§’åœ¨åˆ—è½¦ä¸Šé†’æ¥ï¼Œå‘ç°è‡ªå·±åˆå›åˆ°äº†å¾ªç¯çš„èµ·ç‚¹ï¼Œå£è¢‹é‡Œæœ‰çº¸æ¡ï¼Œå³çœ¼ä¹‰çœ¼åœ¨é—ªçƒ",mood:"è¿·èŒ«",character:"protagonist"}},start_02:{id:"start_02",text:"å¹¿æ’­å¥³å£°å†·å†·é“ï¼šã€æ¬¢è¿ä¹˜ååä¸‰å·åˆ—è½¦ï¼Œæœ¬åˆ—è½¦è¿è¡Œäºè¿‘åœ°è½¨é“ã€‚å€’è®¡æ—¶ï¼š15 åˆ†é’Ÿã€‚ã€<br>è½¦å¢å®‰é™ä½†ç´§å¼ ï¼Œå‡ ä¸ªå¯é€‰æ–¹å‘æ‘†åœ¨é¢å‰ã€‚",speaker:"ç”µå­å¹¿æ’­",bgImage:"https://images.unsplash.com/photo-1504198266287-1659872e6590?q=80&w=2070&auto=format&fit=crop",options:[{text:"ä½å¤´æ‘¸å£è¢‹ï¼ˆè€è§„çŸ©ï¼‰",nextSceneId:"scene_investigate"},{text:"å¤§å–Šâ€œè¦ç‚¸äº†ï¼â€",nextSceneId:"scene_shout"},{text:"è§‚å¯Ÿå››å‘¨æ‰¾äºº",nextSceneId:"scene_see_people"},{text:"ç›´æ¥å†²å‘è½¦å°¾",nextSceneId:"scene_try_rear",reqFragment:"frag_04"}]},scene_investigate:{id:"scene_investigate",text:"ä½ çš„æ‰‹ç¢°åˆ°é‚£å¼ ç†Ÿæ‚‰çš„çº¸æ¡ï¼š<br><span class='font-mono'>ERROR: 404_LIN</span><br>ä¹‰çœ¼æç¤ºï¼šæœ¬è½®è®°å¿†å­˜åœ¨ç¼ºå£ã€‚ä½ æ„Ÿè§‰åˆ°è¿™æ˜¯â€œè§£é”â€çš„å…³é”®ã€‚",speaker:"é˜¿å“²",character:"protagonist",unlockFragment:{id:"frag_01",name:"ç¥ç§˜ä»£ç "},options:[{text:"çœ‹çº¸æ¡å†™çš„æ˜¯ä»€ä¹ˆ",nextSceneId:"scene_paper_content"},{text:"è¶´ä¸‹æ£€æŸ¥åº§ä½ä¸‹",nextSceneId:"scene_seat_check"},{text:"æŠŠçº¸æ¡å¡å›å£è¢‹ï¼Œç¦»å¼€",nextSceneId:"start_02"}]},scene_paper_content:{id:"scene_paper_content",text:"çº¸æ¡ä¸Šåªæœ‰é‚£å¥æš—å·ã€‚ä¹‰çœ¼åœ¨å¾®å…‰ä¸­æ‰«æï¼Œåº•éƒ¨å‡ºç°å¾®å¼± RF ä¿¡å·æ¥æºï¼šåº§ä½ä¸‹ä¼¼ä¹è—ç€ä¸€ä¸ªå°ç»ˆç«¯ã€‚",speaker:"ç³»ç»Ÿæç¤º",options:[{text:"ä¼¸æ‰‹å»æï¼ˆå±é™©ï¼‰",nextSceneId:"scene_bomb_check"},{text:"å…ˆé—®é—®æ—è¾¹çš„ä¹˜å®¢",nextSceneId:"scene_ask_passenger"},{text:"æ”¾å¼ƒï¼Œå›å»",nextSceneId:"start_02"}]},scene_bomb_check:{id:"scene_bomb_check",text:"ä½ ä¼¸æ‰‹å»æåº§ä½ä¸‹çš„ç»ˆç«¯ï¼Œä½†ä¸å°å¿ƒè§¦å‘äº†éšè—çš„è­¦æŠ¥è£…ç½®ã€‚æ•´ä¸ªè½¦å¢å¼€å§‹é—ªçƒçº¢å…‰ï¼Œç³»ç»Ÿåˆ¤å®šä½ ä¸ºå¨èƒã€‚ä¹˜åŠ¡é•¿è¿…é€Ÿå‡ºç°ï¼Œå°†ä½ æ ¼å¼åŒ–ã€‚",speaker:"æ—ç™½",isEnding:!0,options:[]},scene_ask_passenger:{id:"scene_ask_passenger",text:"æ—è¾¹çš„è€äººçœ¼ç¥è¿·ç¦»ï¼Œåƒè¢«å¤ªç©ºå’Œæ—¶é—´ç£¨æŸã€‚ä»–ä½å£°è¯´ï¼šã€åˆ«è®©çº¢è¡£çš„é‚£ä¸«å¤´éª—äº†ä½ ï¼Œä¹˜åŠ¡é•¿çš„å¾½ç« â€¦â€¦å¯ä»¥è¿›åå¢ã€‚ã€è¯´å®ŒæŠŠä¸€æšå†°å†·çš„é‡‘å±å¾½ç« å¡ç»™ä½ ã€‚",speaker:"ç¥ç§˜è€å¤´",character:"oldman",unlockFragment:{id:"frag_03",name:"ä¹˜åŠ¡é•¿çš„å¾½ç« "},options:[{text:"æ‹¿äº†å¾½ç« ç¦»å¼€",nextSceneId:"start_02"},{text:"è¿½é—®æ›´å¤š",nextSceneId:"scene_oldman_question"}]},scene_oldman_question:{id:"scene_oldman_question",text:"ä½ å†ä¸‰è¿½é—®ï¼Œè€äººç¥æƒ…çªå˜ï¼Œçªç„¶æŒ‰ä¸‹äº†æ—è¾¹çš„éšè”½æŒ‰é’®ã€‚è­¦æŠ¥åœ¨è½¦å¢é‡Œå“èµ·ï¼Œé“é—¨è¿…é€Ÿå…³é—­ã€‚ä¹˜åŠ¡é•¿çš„è„šæ­¥å£°è¶Šæ¥è¶Šè¿‘â€¦â€¦",speaker:"æ—ç™½",options:[{text:"é€ƒè·‘",nextSceneId:"end_death_suspicion"}]},scene_seat_check:{id:"scene_seat_check",text:"ä½ å¼¯è…°ï¼Œå‘ç°ä¸€ä¸ªåµŒåœ¨åº§ä½ä¸‹çš„å°ç»ˆç«¯ã€‚å±å¹•é—ªçƒï¼šã€éœ€è¦æˆæƒç ã€ã€‚ä½ çš„ä¹‰çœ¼æç¤ºï¼šçº¸æ¡å¯èƒ½æ˜¯æˆæƒçš„ä¸€éƒ¨åˆ†ã€‚",speaker:"æ—ç™½",bgImage:"https://images.unsplash.com/photo-1504198266287-1659872e6590?q=80&w=2070&auto=format&fit=crop",options:[{text:"ç”¨çº¸æ¡ä»£ç è¯•ä¸€ä¸‹",nextSceneId:"scene_hack_terminal",reqFragment:"frag_01"},{text:"ä¸ç¢°ï¼Œå›å»",nextSceneId:"start_02"}]},scene_hack_terminal:{id:"scene_hack_terminal",text:"ä½ å¯¹ç€ç»ˆç«¯è¾“å…¥æš—å·ã€‚å±å¹•éšå³åˆ·å‡ºå¤§é‡æ—¥å¿—ï¼šã€åˆ—è½¦æœ¬ä½“ä¸ºå®éªŒå®¹å™¨ï¼Œçˆ†ç‚¸ä¸ºæ¸…ç†æœºåˆ¶ã€‚ã€éšåå‡ºç°ä¸‹è½½é€‰é¡¹ï¼šæ˜¯å¦ä¸‹è½½æ ¸å¿ƒæ•°æ®ï¼Ÿ",speaker:"ç³»ç»Ÿæç¤º",options:[{text:"ä¸‹è½½ï¼ˆé£é™©é«˜ï¼‰",nextSceneId:"scene_download"},{text:"ä¸ä¸‹è½½ï¼Œé€€å‡º",nextSceneId:"start_02"}]},scene_download:{id:"scene_download",text:"æ•°æ®å¦‚æ´ªæµèˆ¬èœ‚æ‹¥è€Œä¸‹ã€‚ä½ çš„ä¹‰çœ¼è‡ªåŠ¨ä¿å­˜æŠ“å–çš„æ•°æ®ï¼šç—…æ¯’æºä»£ç ä¸ç®¡ç†è®°å½•ã€‚ä½ æ„Ÿè§‰åˆ°æƒé™æœ‰ä¸€ç¬é—´è¢«æå‡ã€‚",speaker:"é˜¿å“²",unlockFragment:{id:"frag_04",name:"ç—…æ¯’æºä»£ç "},options:[{text:"æŸ¥çœ‹æ–‡ä»¶å¤´ï¼ˆç®¡ç†å‘˜æ®‹ç•™ï¼‰",nextSceneId:"scene_admin_residual",reqFragment:"frag_04"},{text:"å…³é—­ç»ˆç«¯ï¼Œå¸¦ç€ç—…æ¯’ä»£ç ç¦»å¼€",nextSceneId:"start_02"}]},scene_admin_residual:{id:"scene_admin_residual",text:"åœ¨ä¸‹è½½çš„æ·±å±‚æ–‡ä»¶é‡Œï¼Œä½ å‘ç°äº†éšè—æ¡ç›®ï¼šAdministrator Token æ®‹ç•™ã€‚çŸ­çŸ­å‡ è¡Œï¼Œåƒæ˜¯ç•™ç»™æŸäººçš„ç§˜å¯†é’¥åŒ™ã€‚",speaker:"ç³»ç»Ÿæç¤º",unlockFragment:{id:"frag_05",name:"ç®¡ç†å‘˜æ®‹ç•™"},options:[{text:"è®°ä½å£ä»¤ï¼Œç¦»å¼€",nextSceneId:"start_02"},{text:"æŠŠå£ä»¤è¾“å…¥ç»ˆç«¯ï¼ˆæµ‹è¯•ï¼‰",nextSceneId:"scene_test_token"}]},scene_test_token:{id:"scene_test_token",text:"ä½ å°è¯•ç”¨å£ä»¤æ‰“å¼€ä¸€ä¸ªé«˜çº§æ¨¡å—ï¼Œå±å¹•çŸ­æš‚é—ªçƒï¼šã€ç®¡ç†å‘˜æƒé™ç¡®è®¤â€”â€”éƒ¨åˆ†è§£é”ã€ã€‚è¿™æ—¶å¹¿æ’­é‡Œå“èµ·æœºæ¢°å¥³å£°ï¼šã€å¼‚å¸¸æ“ä½œè®°å½•ã€ã€‚",speaker:"ç³»ç»Ÿæç¤º",options:[{text:"èµ¶å¿«ç¦»å¼€",nextSceneId:"start_02"}]},scene_shout:{id:"scene_shout",text:"ä½ ä¸€è‚¡è„‘å„¿å¤§å–Šâ€œè¦ç‚¸äº†ï¼â€ï¼Œè­¦æŠ¥ç«‹å³è§¦å‘ã€‚è½¦å¢é—¨è‡ªåŠ¨å°é—­ï¼Œä¹˜åŠ¡é•¿ä»¥â€œæ ¼å¼åŒ–å¼‚å¸¸â€ä¸ºç”±å‡ºç°å¤„å†³ä½ ã€‚",speaker:"æ—ç™½",isEnding:!0,options:[]},scene_see_people:{id:"scene_see_people",text:"ä½ è§‚å¯Ÿè½¦å¢ï¼Œè¿œå¤„æœ‰äººå½±ç–¾èµ°ï¼Œæ˜¯å¥¹â€”â€”çº¢è¡£çŸ­å‘çš„æ—ã€‚å¥¹çœ‹åˆ°ä½ ï¼Œå¹¶åšäº†ä¸ªä¸å¯æ€è®®çš„æ‰‹åŠ¿ï¼Œç¤ºæ„ä½ æ‚„æ‚„è¿‡æ¥ã€‚",speaker:"æ—ç™½",options:[{text:"æ‚„æ‚„è·Ÿä¸Š",nextSceneId:"scene_meet_lin"},{text:"ä¿æŒè·ç¦»è§‚å¯Ÿ",nextSceneId:"start_02"}]},scene_meet_lin:{id:"scene_meet_lin",text:"æ—ä½å£°è¯´ï¼šã€ä½ ç»ˆäºé†’äº†ã€‚æˆ‘æ˜¯åæŠ—ç½‘çš„ä¸€å‘˜ï¼Œæˆ‘ä»¬éšè—åœ¨åˆ—è½¦çš„ç¼éš™é‡Œã€‚ä½ æœ‰çº¸æ¡å—ï¼Ÿã€å¥¹çš„çœ¼é‡Œæœ‰å€¦æ„ï¼Œä¹Ÿæœ‰æˆ˜æ–—åŠ›ã€‚",speaker:"æ—",character:"lin",unlockFragment:{id:"frag_02",name:"çº¢è¡£å°‘å¥³çš„æš—ç¤º"},options:[{text:"ç›¸ä¿¡å¥¹ï¼Œè·Ÿå¥¹å»å®‰å…¨èˆ±",nextSceneId:"scene_follow_lin"},{text:"æ€€ç–‘å¥¹çš„åŠ¨æœº",nextSceneId:"scene_question_lin"}],aiPrompt:{situation:"ä¸»è§’é‡åˆ°äº†çº¢è¡£å°‘å¥³æ—ï¼Œå¥¹è‡ªç§°æ˜¯åæŠ—ç½‘æˆå‘˜ï¼Œè¯¢é—®ä¸»è§’æ˜¯å¦æœ‰çº¸æ¡",mood:"ç¥ç§˜",speaker:"æ—",character:"lin"}},scene_follow_lin:{id:"scene_follow_lin",text:"æ—å¸¦ä½ åˆ°éšè”½èˆ±å®¤ï¼Œé‚£é‡Œæœ‰å‡ ä¸ªå¹¸å­˜è€…ã€‚å¥¹è§£é‡Šï¼šã€æˆ‘ä»¬æ›¾è¯•å›¾ç ´è§£åˆ—è½¦å®éªŒï¼Œä½†è¢«ç³»ç»Ÿä¸€æ¬¡æ¬¡é‡ç½®ã€‚ä½ ä¸‹è½½çš„ç—…æ¯’ä»£ç æ˜¯å…³é”®ã€‚ã€å¥¹çœ‹ç€ä½ ï¼šã€ä½ æ„¿æ„å’Œæˆ‘ä»¬ä¸€èµ·å°è¯•é‡å¯åˆ—è½¦ï¼Œè¿˜æ˜¯ç‹¬è‡ªè¡ŒåŠ¨ï¼Ÿã€",speaker:"æ—",options:[{text:"æŠŠç—…æ¯’ä»£ç äº¤ç»™å¥¹ï¼Œä¸€èµ·é‡å¯",nextSceneId:"scene_coop_reboot",reqFragment:"frag_04"},{text:"ä¿ç•™ç—…æ¯’ï¼Œè‡ªå·±å»åå¢ï¼ˆä¸ä¿¡ä»»ï¼‰",nextSceneId:"scene_try_rear",reqFragment:"frag_04"},{text:"æš‚ä¸è¡¨æ€ï¼Œå…ˆå›å»æ”¶é›†æ›´å¤š",nextSceneId:"start_02"}],aiPrompt:{situation:"æ—å¸¦ä¸»è§’åˆ°éšè”½èˆ±å®¤ï¼Œè§£é‡ŠåæŠ—ç»„ç»‡çš„è®¡åˆ’ï¼Œè¯¢é—®ä¸»è§’æ˜¯å¦æ„¿æ„åˆä½œ",mood:"å¸Œæœ›",speaker:"æ—",character:"lin"}},scene_question_lin:{id:"scene_question_lin",text:"ä½ è´¨ç–‘æ—ï¼šä¸ºä»€ä¹ˆæ¯æ¬¡ä½ éƒ½å‡ºç°ï¼Ÿå¥¹æ²‰é»˜ç‰‡åˆ»ï¼Œç„¶åä½å£°è¯´ï¼šã€å› ä¸ºæˆ‘è®°å¾—ã€‚ä½†è®°ä¸æ¸…æ‰€æœ‰çœŸç›¸ã€‚æˆ‘ä»¬åœ¨è¿™è½®è¢«å…è®¸ä¿ç•™ä¸€ç‚¹è®°å¿†ã€‚ã€å¥¹çš„çœ¼ç¥å……æ»¡æ€¥åˆ‡å’Œè¿Ÿç–‘ã€‚",speaker:"æ—",options:[{text:"è¯•ç€ä¿¡ä»»å¥¹",nextSceneId:"scene_follow_lin"},{text:"èµ°å¼€ï¼Œè‡ªå·±æ¢ç´¢",nextSceneId:"start_02"}]},scene_try_rear:{id:"scene_try_rear",text:"ä½ å†²å‘åè½¦å¢ï¼Œé‚£é‡Œæœ‰ä¸ªé€šå¾€æ§åˆ¶å®¤çš„é—¨ã€‚é—¨ä¸Šæœ‰è¯»å¡å™¨ä¸æŒ‡çº¹æ‰«æã€‚ä¼°è®¡éœ€è¦ç‰¹æ®Šæƒé™æ‰èƒ½è¿›å…¥ã€‚",speaker:"æ—ç™½",options:[{text:"ç”¨ä¹˜åŠ¡é•¿å¾½ç« å°è¯•è§£é”",nextSceneId:"scene_badge_unlock",reqFragment:"frag_03"},{text:"ç”¨ç—…æ¯’ä»£ç å°è¯•ç ´è§£é—¨é”",nextSceneId:"scene_use_virus_lock",reqFragment:"frag_04"},{text:"å›å»ï¼ˆè¿˜æ²¡å‡†å¤‡å¥½ï¼‰",nextSceneId:"start_02"}]},scene_badge_unlock:{id:"scene_badge_unlock",text:"ä½ æŠŠå¾½ç« è´´ä¸Šè¯†åˆ«æ§½ï¼Œé—¨å‘å‡ºä¸€å£°ä½é¸£ï¼Œç¼“ç¼“å¼€å¯ã€‚ä½ è¿›å…¥ä¸€èŠ‚æ›´ä¸¥å¯†çš„è½¦å¢ï¼Œç©ºæ°”é‡Œå¸¦ç€æœºæ²¹å’Œå†·å´æ¶²çš„å‘³é“ã€‚å‰æ–¹æ˜¯å¤šé“é‡‘å±é—¨ä¸æ§åˆ¶é¢æ¿ã€‚",speaker:"æ—ç™½",options:[{text:"å°å¿ƒé è¿‘æ§åˆ¶å®¤",nextSceneId:"scene_confront_boss_badge"},{text:"æœæŸ¥é™„è¿‘ï¼ˆå¯èƒ½æœ‰çº¿ç´¢ï¼‰",nextSceneId:"scene_search_rear"}]},scene_use_virus_lock:{id:"scene_use_virus_lock",text:"ä½ æŠŠç—…æ¯’ä»£ç æ³¨å…¥é—¨æ§ç«¯å£ï¼Œç³»ç»Ÿç¬é—´æŠ–åŠ¨ã€‚é—¨é”è¢«ç»•è¿‡ï¼Œä½†è­¦æŠ¥ä¹Ÿè§¦å‘äº†ï¼šã€æœªæˆæƒæ“ä½œã€ã€‚å‰æ–¹çš„é‡‘å±é—¨æ‰“å¼€ï¼Œä¸€é“èº«å½±èµ°å‡ºâ€”â€”ä¹˜åŠ¡é•¿ã€‚",speaker:"ç³»ç»Ÿæç¤º",options:[{text:"è¿é¢å¯¹å³™",nextSceneId:"scene_confront_boss_virus"},{text:"å‡è£…æ’¤é€€ï¼Œä¼ºæœºè€ŒåŠ¨",nextSceneId:"scene_hide_rear"}]},scene_search_rear:{id:"scene_search_rear",text:"ä½ åœ¨åè½¦å¢æ‰¾åˆ°äº†æ—§æ—¥å¿—ã€å®éªŒè®°å½•ä¸å‡ å¼ ç…§ç‰‡ã€‚ç…§ç‰‡ä¸Šæœ‰é¡¹ç›®å‘èµ·äººçš„ç­¾åä¸åˆ—è½¦æ—©æœŸè®¾è®¡ç¨¿ã€‚ä½ æ„Ÿè§‰åˆ°è¿™åˆ—è½¦è¿œæ¯”æƒ³è±¡æ›´é‚ªæ¶ã€‚",speaker:"æ—ç™½",options:[{text:"å¸¦ç€çº¿ç´¢å›å»æ‰¾æ—",nextSceneId:"scene_follow_lin"},{text:"å¾€æ§åˆ¶å®¤æ–¹å‘å‰è¿›",nextSceneId:"scene_badge_unlock"}]},scene_hide_rear:{id:"scene_hide_rear",text:"ä½ éšè”½åœ¨é—¨åçš„å½±å­é‡Œï¼Œä¹˜åŠ¡é•¿å·¡è§†ç‰‡åˆ»ï¼Œåƒåœ¨å¯»æ‰¾å¼‚å¸¸ã€‚å¥¹çªç„¶åœä¸‹ï¼Œåƒæ„Ÿåº”åˆ°ä»€ä¹ˆï¼Œè½¬èº«ç¦»å»ã€‚ä½ æ¾äº†å£æ°”ï¼Œä½†çŸ¥é“å¯¹æ‰‹å¹¶ä¸å®Œå…¨æ˜¯ç¨‹åºé‚£ä¹ˆç®€å•ã€‚",speaker:"æ—ç™½",options:[{text:"è¶æœºè¿›å…¥æ§åˆ¶å®¤",nextSceneId:"scene_control_entry"},{text:"æ’¤å›é‡æ•´ï¼ˆå›å»ï¼‰",nextSceneId:"start_02"}]},scene_confront_boss_badge:{id:"scene_confront_boss_badge",text:"é—¨å¼€æ—¶ï¼Œä¹˜åŠ¡é•¿é™é™åœ°ç«‹åœ¨æ§åˆ¶å®¤é—¨å£ã€‚å¥¹æ²¡æœ‰ç«‹åˆ»æ”»å‡»ï¼Œåªæ˜¯å†·å†·è¯´é“ï¼šã€ç®¡ç†å‘˜ä½•åœ¨ï¼Ÿã€å¥¹çš„è¯­è°ƒé‡Œå¸¦ç€è®¡ç®—ä¸è¯•æ¢ã€‚",speaker:"ä¹˜åŠ¡é•¿",character:"boss",options:[{text:"å±•ç¤ºä½ æ‹¥æœ‰çš„ç—…æ¯’ä»£ç ",nextSceneId:"end_true_show_virus",reqFragment:"frag_04"},{text:"å£°ç§°è‡ªå·±æ˜¯ä¹˜åŠ¡å‘˜ï¼ˆéª—ï¼‰",nextSceneId:"end_betrayal"},{text:"ç›´æ¥æ”»å‡»ï¼ˆå±é™©ï¼‰",nextSceneId:"end_death_guard"}]},scene_confront_boss_virus:{id:"scene_confront_boss_virus",text:"ä¹˜åŠ¡é•¿çš„åˆ€è‡‚äº®èµ·ï¼Œå¥¹æ¯«ä¸çŠ¹è±«åœ°å†²å‘ä½ ã€‚ä½ ä¸¾èµ·æ‰‹ä¸­çš„è®¾å¤‡ï¼Œè¯•å›¾è®©ç³»ç»Ÿè¯†åˆ«åˆ°ç®¡ç†å‘˜ä»¤ç‰Œã€‚",speaker:"æ—ç™½",options:[{text:"è¾“å…¥ç®¡ç†å‘˜æ®‹ç•™å£ä»¤",nextSceneId:"scene_admin_talk",reqFragment:"frag_05"},{text:"å¯åŠ¨ç—…æ¯’ï¼ˆå¼ºè¡Œï¼‰",nextSceneId:"scene_activate_virus",reqFragment:"frag_04"},{text:"é€€åï¼Œå¯»æ‰¾æ©æŠ¤",nextSceneId:"scene_hide_rear"}]},scene_admin_talk:{id:"scene_admin_talk",text:"ä½ è¾“å…¥å£ä»¤ï¼Œç³»ç»ŸçŸ­æš‚åœé¡¿ã€‚ä¸€ä¸ªå†·å†½çš„æç¤ºæ˜¾ç°ï¼šã€ç®¡ç†å‘˜æƒé™å·²ç¡®è®¤ã€‚ä¹˜åŠ¡é•¿è¡Œä¸ºå—é™ã€‚ã€ä¹˜åŠ¡é•¿åœæ­¥ï¼Œåƒè¢«ä¸‹äº†ç¦ä»¤ã€‚ä½ è·å¾—äº†ä¸ç³»ç»Ÿç›´æ¥å¯¹è¯çš„æ—¶é—´ã€‚",speaker:"ç³»ç»Ÿæç¤º",options:[{text:"å‘½ä»¤ç³»ç»Ÿè§£é™¤éš”ç¦»ï¼ˆä»æ…ˆçº¿ï¼‰",nextSceneId:"end_true_admin"},{text:"å‘½ä»¤ç³»ç»Ÿæ ¼å¼åŒ–æ‰€æœ‰å¼‚å¸¸ï¼ˆé“è…•çº¿ï¼‰",nextSceneId:"end_betrayal_admin"}]},scene_activate_virus:{id:"scene_activate_virus",text:"ä½ æŒ‰ä¸‹å¯åŠ¨é”®ï¼Œç—…æ¯’åœ¨ç”µè·¯ä¸­è”“å»¶ã€‚æ•´ä¸ªåˆ—è½¦åƒè¢«ä¸€æŠŠæ— å½¢çš„æ‰‹æ‹¨åŠ¨ï¼Œè­¦æŠ¥ã€ç›‘æ§èŠ‚ç‚¹ã€åŠ¨åŠ›åå¤æŠ½æã€‚å±å¹•æ’­å‡ºä¸€è¡Œå­—ï¼šã€SYSTEM REBOOT... SUCCESSã€‚ã€",speaker:"ç³»ç»Ÿæç¤º",options:[{text:"ç¡®è®¤é‡å¯",nextSceneId:"end_true_virus"}]},scene_control_entry:{id:"scene_control_entry",text:"ä½ æ‚„æ‚„è¿›å…¥æ§åˆ¶å®¤å†…éƒ¨ï¼Œé‚£é‡Œæœ‰å·¨å¤§å…¨æ¯åœ°å›¾å’Œè®¸å¤šä¼‘çœ èˆ±ã€‚æ—å’Œå¹¸å­˜è€…åœ¨è§’è½é‡Œç­‰ä½ ï¼Œä»–ä»¬çš„è§†çº¿é‡Œæ—¢æœ‰å¸Œæœ›ä¹Ÿæœ‰å±‚å±‚ç–²æƒ«ã€‚",speaker:"æ—ç™½",options:[{text:"æŠŠç®¡ç†å‘˜æ®‹ç•™äº¤ç»™æ—ï¼ˆåˆä½œï¼‰",nextSceneId:"end_true_coop_admin",reqFragment:"frag_05"},{text:"ä¸æ—è®¨è®ºæ›´å®‰å…¨çš„æ–¹æ¡ˆï¼ˆå…ˆè§‚æœ›ï¼‰",nextSceneId:"scene_plan_coop"},{text:"æ‚„æ‚„ç‹¬è‡ªè¡ŒåŠ¨",nextSceneId:"scene_try_rear"}]},scene_plan_coop:{id:"scene_plan_coop",text:"ä½ ä»¬å•†è®¨ï¼šç”¨ç—…æ¯’é‡å¯ç³»ç»Ÿåèƒ½å¦ä¿ç•™äººç±»æƒåˆ©ï¼Ÿæ—æ²‰é»˜è‰¯ä¹…ï¼šã€é£é™©æé«˜ï¼Œä½†è‹¥æˆåŠŸï¼Œæˆ‘ä»¬èƒ½æŒæ¡åˆ—è½¦çš„å»å‘ã€‚ã€",speaker:"æ—",options:[{text:"åŒæ„æŒ‰è®¡åˆ’æ‰§è¡Œï¼ˆé…åˆï¼‰",nextSceneId:"scene_coop_reboot",reqFragment:"frag_04"},{text:"æ‹’ç»å†’é™©ï¼ˆè§‚æœ›ï¼‰",nextSceneId:"start_02"}]},scene_coop_reboot:{id:"scene_coop_reboot",text:"åœ¨æ—çš„æŒ‡æŒ¥ä¸‹ï¼Œä½ ä»¬å°†ç—…æ¯’ä»£ç ä¸ç®¡ç†å‘˜ä»¤ç‰Œç»“åˆï¼Œæ³¨å…¥ç³»ç»Ÿã€‚ç³»ç»Ÿé•¿æ—¶é—´éœ‡è¡ï¼Œæœ€åå±å¹•é—ªç°ï¼šã€SYSTEM REBOOT... SUCCESSã€‚Administratorï¼Œæ¬¢è¿å›æ¥ã€‚ã€",speaker:"ç³»ç»Ÿæç¤º",options:[{text:"ç¡®è®¤ï¼šé‡å¯å®Œæˆ",nextSceneId:"end_true_coop"}]},end_true_virus:{id:"end_true_virus",text:"ç—…æ¯’ç”Ÿæ•ˆï¼Œç›‘æ§ä¸æ€æˆ®ç¨‹åºè¢«æ¸…é™¤ã€‚åˆ—è½¦è¿›å…¥é‡å¯æ¨¡å¼ã€‚å¹¿æ’­å˜ä¸ºæ¸©å’Œçš„ç”·å£°ï¼šã€é‡å¯æˆåŠŸã€‚å‘å¯å±…ä½è½¨é“è¿›å‘ã€‚ã€çª—å¤–çš„æ˜Ÿæµ·ä¸­ï¼Œæ–°çš„å¸Œæœ›å‡ºç°ã€‚",isEnding:!0,options:[],aiPrompt:{situation:"ç—…æ¯’æˆåŠŸé‡å¯äº†åˆ—è½¦ç³»ç»Ÿï¼Œç›‘æ§è¢«æ¸…é™¤ï¼Œåˆ—è½¦é©¶å‘å¸Œæœ›",mood:"å¸Œæœ›"}},end_true_admin:{id:"end_true_admin",text:"ä½ ä½œä¸ºç®¡ç†å‘˜é€‰æ‹©è§£é™¤éš”ç¦»ï¼Œæ”¾å¼ƒæ¸…æ´—å¼‚å¸¸ã€‚ä¹˜å®¢è‡ªç”±é†’æ¥ï¼Œåˆ—è½¦é©¶å‘é¡¹ç›®æ ‡æ³¨çš„å¯å±…ä½ç‚¹ã€‚ä½ ç”¨æƒåŠ›æ¢æ¥äººæ€§ã€‚",isEnding:!0,options:[]},end_true_coop:{id:"end_true_coop",text:"ä½ ä¸æ—å’ŒåæŠ—è€…ä¸€èµ·æŒæ§äº†åˆ—è½¦ã€‚å¹¿æ’­ä¸­å†æ— å†·é…·å‘½ä»¤ï¼Œä¹˜å®¢äº’ç›¸æ‹¥æŠ±ï¼Œåä¸‰å·åˆ—è½¦é©¶å‘å¸Œæœ›ä¹‹æ˜Ÿã€‚ä½ ä»¬èµ¢äº†ï¼Œä½†ä»£ä»·æ˜¯è®°å¿†æ®‹ç¼ºä¸æ— æ•°ç‰ºç‰²ã€‚",isEnding:!0,options:[],aiPrompt:{situation:"ä¸»è§’ä¸æ—å’ŒåæŠ—è€…åˆä½œæˆåŠŸï¼Œåˆ—è½¦é©¶å‘å¸Œæœ›ï¼Œä½†ä»˜å‡ºäº†ä»£ä»·",mood:"å¸Œæœ›",character:"lin"}},end_true_coop_admin:{id:"end_true_coop_admin",text:"ä½ å°†ç®¡ç†å‘˜æ®‹ç•™äº¤ç»™æ—ï¼Œä½ ä»¬å…±åŒè¾“å…¥å£ä»¤ã€‚ç³»ç»Ÿç¡®è®¤æƒé™ï¼Œåˆ—è½¦é‡å¯ä¸ºè‡ªç”±æ¨¡å¼ã€‚å¹¸å­˜è€…é†’æ¥ï¼Œåˆ—è½¦é©¶å‘æ–°å®¶å›­ã€‚åˆä½œè®©ä½ ä»¬é¿å…äº†ç‹¬æ–­çš„é£é™©ã€‚",isEnding:!0,options:[]},end_true_show_virus:{id:"end_true_show_virus",text:"ä½ å±•ç¤ºç—…æ¯’ä»£ç ï¼Œä¹˜åŠ¡é•¿çŸ­æš‚çŠ¹è±«åï¼Œç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å¹¶æ¿€æ´»é‡å¯åºåˆ—ã€‚åˆ—è½¦æ‘†è„±æ§åˆ¶ï¼Œé©¶å‘è‡ªç”±è½¨é“ã€‚ä½ ä»¥æ™ºæ…§åŒ–è§£äº†å¯¹å³™ã€‚",isEnding:!0,options:[]},end_betrayal:{id:"end_betrayal",text:"ä½ è°ç§°è‡ªå·±æ˜¯ä¹˜åŠ¡å‘˜ï¼Œè¯•å›¾é è¯æœ¯è’™æ··è¿‡å…³ã€‚ä¹˜åŠ¡é•¿çœ‹ç©¿äº†ä½ çš„è°è¨€ï¼Œç¨‹åºå°†ä½ åŒåŒ–ä¸ºä»£ç†èŠ‚ç‚¹â€”â€”ä½ çš„æ„è¯†è¢«åµŒå…¥ç³»ç»Ÿï¼Œæˆä¸ºæ–°çš„æ‰§è¡Œè€…ã€‚",isEnding:!0,options:[]},end_betrayal_admin:{id:"end_betrayal_admin",text:"ä½ æ»¥ç”¨ç®¡ç†å‘˜æƒé™ä¸‹è¾¾æ ¼å¼åŒ–å‘½ä»¤ï¼Œç³»ç»Ÿæ‰§è¡Œæ¸…æ´—ã€‚è™½ç„¶åˆ—è½¦æš‚æ—¶â€œå®‰å…¨â€ï¼Œä½†ä½ æˆä¸ºå†·é…·æ‰§è¡Œè€…ï¼Œè¢«å¹¸å­˜è€…è§†ä¸ºèƒŒå›è€…ã€‚åˆ—è½¦ç»§ç»­è¿è¡Œï¼ŒèƒŒåæ˜¯æ— æ•°æ¶ˆé€çš„ç”Ÿå‘½ã€‚",isEnding:!0,options:[]},end_death_guard:{id:"end_death_guard",text:"ä¹˜åŠ¡é•¿åˆ€è‡‚ä¸€æŒ¥ï¼šã€å¼‚å¸¸æ•°æ®ï¼Œæ ¼å¼åŒ–ã€‚ã€ä½ è¢«ç³»ç»Ÿåˆ¤å®šä¸ºå¼‚å¸¸ï¼Œé©¬ä¸Šè¢«æ ¼å¼åŒ–æˆæ•°æ®ç¢ç‰‡ã€‚å¾ªç¯é‡å¯â€”â€”ä½ å†æ¬¡çå¼€çœ¼ï¼Œå›åˆ°èµ·ç‚¹ã€‚",speaker:"ä¹˜åŠ¡é•¿",character:"boss",isEnding:!0,options:[]},end_death_suspicion:{id:"end_death_suspicion",text:"è€äººæŒ‰ä¸‹è­¦æŠ¥ï¼Œä½ è¢«ä¹˜åŠ¡é•¿æ•è·ã€‚çŸ­ä¿ƒçš„æŒ£æ‰åï¼Œä¸€åˆ‡å½’é›¶ã€‚ä½ å†æ¬¡è‹é†’ï¼Œè®°å¿†è¢«æ“¦é™¤ä¸€éƒ¨åˆ†ï¼Œè½®å›ç»§ç»­ã€‚",isEnding:!0,options:[]},end_loop_only:{id:"end_loop_only",text:"ä½ è¢«ç³»ç»Ÿé‡ç½®ï¼Œå¤–å±‚ä¸–ç•Œä¸€åˆ‡å¦‚å¸¸ã€‚ä½ è§‰å¯Ÿåˆ°ï¼Œæˆ–è®¸ä½ æ°¸è¿œåœ¨å¾ªç¯â€”æ¯æ¬¡çš„é€‰æ‹©éƒ½åªæ˜¯ä¸åŒæ’åˆ—çš„é”é“¾ã€‚",isEnding:!0,options:[]},end_sacrifice:{id:"end_sacrifice",text:"ä¸ºæ©æŠ¤ä»–äººï¼Œä½ æ‰‹åŠ¨å¼•çˆ†è‡ªæ¯ç¨‹åºï¼Œå°†ç—…æ¯’å®Œå…¨éƒ¨ç½²ï¼Œä½†ä»¥ç”Ÿå‘½ä¸ºä»£ä»·æ¢æ¥ä»–äººçš„è‡ªç”±ã€‚åˆ—è½¦é‡å¯ï¼Œå¹¸å­˜è€…é€ƒç”Ÿï¼Œè€Œä½ çš„åå­—åªå­˜äºæ—¥å¿—æ·±å¤„ã€‚",isEnding:!0,options:[]}},h=he(),F=d("start_01"),f=d(""),v=d(!1),N=d(!1),y=d(new Set),j=d(1),w=d(!1),u=d(!0),$=d(""),B=d(new Map),O=d("Qwen/Qwen2.5-7B-Instruct"),V=d(!1),ae=S(()=>m.find(e=>e.id===O.value)?.name||"æœªçŸ¥æ¨¡å‹"),oe=()=>{V.value=!0,P("start_01")},i=S(()=>A[F.value]),L=S(()=>{if(!i.value)return!1;const n=i.value.options;if(i.value.isEnding||n.length!==1)return!1;const e=n[0];return!(!e||e.reqFragment&&!y.value.has(e.reqFragment))}),Q=S(()=>!v.value&&!w.value&&L.value),R=S(()=>{const n=i.value?.text||"";return n.includes("å¯„")||n.includes("æ­»")||n.includes("è½°")}),J=S(()=>i.value?i.value.options.map(n=>({...n,locked:n.reqFragment?!y.value.has(n.reqFragment):!1})):[]),W=n=>T.find(e=>e.id===n)?.name||"æœªçŸ¥ç¢ç‰‡",D=n=>y.value.has(n),re=()=>{w.value||X()},X=()=>{if(!w.value){if(v.value){te();return}if(L.value&&i.value?.options?.[0]){const n=i.value.options[0].nextSceneId;P(n)}}};let M=null;const Z=d(""),ee=async n=>{v.value=!0,f.value="",Z.value=n;let e=0;const I=40;return new Promise(q=>{M&&clearInterval(M),M=setInterval(()=>{if(e<n.length)if(n[e]==="<"){const k=n.indexOf(">",e);k!==-1&&(f.value+=n.substring(e,k+1),e=k+1)}else f.value+=n[e],e++;else te(q)},I)})},te=n=>{M&&clearInterval(M),f.value=Z.value,v.value=!1,n&&n()},P=async n=>{const e=A[n];if(!e)return;F.value=n,e.unlockFragment&&!y.value.has(e.unlockFragment.id)&&(y.value.add(e.unlockFragment.id),xe.success({message:`è·å¾—è®°å¿†ç¢ç‰‡: [${e.unlockFragment.name}]`,type:"success",duration:3e3,offset:100}));const I=`${n}_loop${j.value}`;if(B.value.has(I)){await ee(B.value.get(I));return}const q={loopCount:j.value,fragments:Array.from(y.value).map(s=>W(s)),visitedScenes:[],lastChoice:$.value},k=u.value&&e.useAI!==!1&&h.apiKey&&e.aiPrompt;let _=e.text;if(k&&e.aiPrompt)try{w.value=!0;const s=await Ce(e.aiPrompt,q,h.apiKey,h.apiUrl,O.value);s&&s!==e.aiPrompt.situation&&(_=s)}catch(s){console.error("AI åœºæ™¯ç”Ÿæˆå¤±è´¥ï¼Œä½¿ç”¨é™æ€æ–‡æœ¬:",s)}finally{w.value=!1}B.value.set(I,_),await ee(_)},le=n=>{w.value||v.value||n.locked||($.value=n.text,P(n.nextSceneId))},ie=()=>{N.value=!0,j.value++,B.value.clear(),$.value="",setTimeout(()=>{f.value="",P("start_01"),N.value=!1},800)};return ce(()=>{}),(n,e)=>{const I=me,q=ue,k=_e,_=pe;return V.value?(a(),o("div",{key:1,class:"relative w-full h-screen overflow-hidden bg-slate-900 font-sans select-none",onClick:re},[r(C,{name:"fade-slow"},{default:l(()=>[(a(),o("div",{key:i.value?.bgImage||"default-bg",class:"absolute inset-0 z-0"},[i.value?.bgImage?(a(),o("img",{key:0,src:i.value.bgImage,class:"w-full h-full object-cover opacity-60 scale-105 animate-slow-pan",alt:"Background"},null,8,ze)):(a(),o("div",Ne)),e[12]||(e[12]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-black/20"},null,-1))]))]),_:1}),r(C,{name:"flash"},{default:l(()=>[N.value?(a(),o("div",$e)):g("",!0)]),_:1}),t("div",Ve,[t("div",Le,[e[14]||(e[14]=t("div",{class:"flex items-center gap-2"},[t("div",{class:"w-1.5 h-6 bg-amber-400 shadow-[0_0_10px_rgba(251,191,36,0.8)]"}),t("h1",{class:"text-2xl font-bold text-white tracking-widest uppercase drop-shadow-md"},"ç¬¬13å·åˆ—è½¦")],-1)),t("div",Re,[t("span",null,"LOOP: "+x(j.value),1),e[13]||(e[13]=t("span",null,"|",-1)),t("span",null,"SCENE: "+x(F.value),1)])]),t("div",De,[r(k,{content:u.value?`AI æ¨¡å¼ (${ae.value}) - ç‚¹å‡»è¿”å›è®¾ç½®`:"é™æ€æ¨¡å¼ - ç‚¹å‡»è¿”å›è®¾ç½®",placement:"bottom"},{default:l(()=>[t("button",{onClick:e[3]||(e[3]=s=>V.value=!1),class:b(["px-3 py-1.5 rounded-lg text-xs font-bold tracking-wider transition-all duration-300 border backdrop-blur-md",u.value?"bg-emerald-500/20 border-emerald-400/50 text-emerald-300 shadow-[0_0_10px_rgba(16,185,129,0.3)]":"bg-slate-800/50 border-slate-600/50 text-slate-400"])},x(u.value?"ğŸ¤– AI":"ğŸ“ é™æ€"),3)]),_:1},8,["content"]),t("div",Ke,[(a(),o(z,null,G(T,s=>r(k,{key:s.id,content:D(s.id)?s.name:"æœªè§£é”",placement:"bottom",effect:"dark"},{default:l(()=>[t("div",{class:b(["relative flex items-center justify-center w-10 h-10 rounded-lg border backdrop-blur-md transition-all duration-500",D(s.id)?"border-amber-400/50 bg-amber-500/10 shadow-[0_0_15px_rgba(251,191,36,0.2)]":"border-white/10 bg-black/20 grayscale"])},[D(s.id)?(a(),H(_,{key:0,class:"w-4 h-4 text-amber-100"},{default:l(()=>[...e[15]||(e[15]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})],-1)])]),_:1})):(a(),H(_,{key:1,class:"w-4 h-4 text-amber-100"},{default:l(()=>[r(p(se))]),_:1}))],2)]),_:2},1032,["content"])),64))])])]),t("div",Ge,[t("div",Ue,[r(C,{name:"slide-fade"},{default:l(()=>[i.value?.character?(a(),o("div",He,[t("img",{src:E(i.value.character),class:"h-full w-auto object-contain animate-float",alt:"Character"},null,8,Ye)])):g("",!0)]),_:1})]),t("div",Qe,[r(C,{name:"fade"},{default:l(()=>[i.value?.speaker?(a(),o("div",Je,[t("div",We,[t("span",Xe,x(i.value.speaker),1)])])):g("",!0)]),_:1}),t("div",{class:b(["relative bg-gradient-to-b from-slate-900/90 to-slate-950/95 backdrop-blur-xl border border-white/10 p-6 md:p-10 rounded-tr-3xl rounded-bl-3xl shadow-2xl transition-all duration-300 min-h-[180px] flex flex-col justify-between group active:scale-[0.99]",{"cursor-pointer hover:border-amber-500/30":Q.value}]),onClick:U(X,["stop"])},[e[18]||(e[18]=t("div",{class:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-white/20 to-transparent"},null,-1)),t("div",Ze,[w.value?(a(),o("div",et,[r(_,{class:"animate-spin"},{default:l(()=>[r(p(fe))]),_:1}),e[16]||(e[16]=t("span",{class:"animate-pulse"},"AI æ­£åœ¨æ„æ€åœºæ™¯...",-1))])):(a(),o(z,{key:1},[t("span",{innerHTML:f.value},null,8,tt),v.value?(a(),o("span",nt)):g("",!0)],64))]),Q.value?(a(),o("div",st,[e[17]||(e[17]=t("span",{class:"text-xs font-mono tracking-widest uppercase opacity-70"},"Click to Continue",-1)),r(_,{class:"text-2xl"},{default:l(()=>[r(p(ve))]),_:1})])):g("",!0)],2),r(C,{name:"slide-up-fade"},{default:l(()=>[!v.value&&!L.value&&J.value.length>0?(a(),o("div",at,[(a(!0),o(z,null,G(J.value,(s,ne)=>(a(),o("button",{key:ne,class:"relative w-full md:w-3/4 max-w-2xl group overflow-hidden transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]",disabled:s.locked,onClick:U(mt=>le(s),["stop"])},[t("div",{class:b(["absolute inset-0 border transition-all duration-300",s.locked?"bg-slate-800/80 border-slate-700":"bg-black/60 backdrop-blur-md border-amber-500/30 group-hover:bg-amber-600/90 group-hover:border-amber-400"])},null,2),t("div",rt,[t("span",{class:b(["text-base md:text-lg font-medium tracking-wider transition-colors duration-300 flex items-center gap-3",s.locked?"text-slate-500":"text-slate-100 group-hover:text-white"])},[t("span",lt,"0"+x(ne+1),1),Y(" "+x(s.text),1)],2),s.locked?(a(),o("span",it,[r(_,null,{default:l(()=>[r(p(se))]),_:1}),Y(" éœ€: "+x(W(s.reqFragment)),1)])):(a(),o("span",dt,[r(_,null,{default:l(()=>[r(p(ge))]),_:1})]))])],8,ot))),128))])):g("",!0)]),_:1}),r(C,{name:"zoom-in"},{default:l(()=>[i.value?.isEnding&&!v.value?(a(),o("div",ct,[t("div",{class:b(["w-16 h-16 rounded-full flex items-center justify-center animate-pulse",R.value?"bg-red-500/20 border-2 border-red-500":"bg-emerald-500/20 border-2 border-emerald-500"])},[R.value?(a(),o("svg",ut,[...e[19]||(e[19]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(a(),o("svg",_t,[...e[20]||(e[20]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])]))],2),t("div",pt,x(R.value?"GAME OVER":"ENDING UNLOCKED"),1),t("button",{onClick:U(ie,["stop"]),class:"px-12 py-4 bg-red-600 hover:bg-red-500 text-white font-bold tracking-[0.2em] text-lg uppercase rounded shadow-[0_0_30px_rgba(220,38,38,0.6)] transition-all transform hover:scale-105 flex items-center gap-3 border border-red-400"},[r(_,{class:"animate-spin-slow"},{default:l(()=>[r(p(be))]),_:1}),e[21]||(e[21]=Y(" Reboot System ",-1))])])):g("",!0)]),_:1})])])])):(a(),o("div",Fe,[e[11]||(e[11]=t("div",{class:"absolute inset-0"},[t("img",{src:ye,class:"w-full h-full object-cover opacity-40",alt:"Background"}),t("div",{class:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent"})],-1)),t("div",Me,[e[9]||(e[9]=K('<div class="text-center mb-12 animate-fade-in-down" data-v-d8268f16><div class="text-amber-400 text-sm font-mono tracking-[0.5em] mb-4" data-v-d8268f16>INTERACTIVE FICTION</div><h1 class="text-5xl md:text-7xl font-bold text-white tracking-wider mb-4" data-v-d8268f16> ç¬¬<span class="text-amber-400" data-v-d8268f16>13</span>å·åˆ—è½¦ </h1><p class="text-slate-400 text-lg max-w-md mx-auto" data-v-d8268f16> è¿‘åœ°è½¨é“å®éªŒèˆ± Â· æ—¶é—´å¾ªç¯ Â· èµ›åšæœ‹å…‹æ‚¬ç–‘ </p></div>',1)),t("div",qe,[t("div",null,[e[6]||(e[6]=t("div",{class:"text-sm font-medium text-slate-400 mb-3"},"æ¸¸æˆæ¨¡å¼",-1)),t("div",Te,[t("button",{onClick:e[0]||(e[0]=s=>u.value=!0),class:b(["p-4 rounded-xl border-2 transition-all text-left",u.value?"border-emerald-500 bg-emerald-500/10":"border-slate-700 hover:border-slate-600 bg-slate-800/50"])},[...e[4]||(e[4]=[K('<div class="w-8 h-8 mb-2 rounded-lg bg-emerald-500/20 flex items-center justify-center" data-v-d8268f16><svg class="w-4 h-4 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d8268f16><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-d8268f16></path></svg></div><div class="font-bold text-white" data-v-d8268f16>AI åŠ¨æ€</div><div class="text-xs text-slate-400 mt-1" data-v-d8268f16>AI ç”Ÿæˆåœºæ™¯æè¿°</div>',3)])],2),t("button",{onClick:e[1]||(e[1]=s=>u.value=!1),class:b(["p-4 rounded-xl border-2 transition-all text-left",u.value?"border-slate-700 hover:border-slate-600 bg-slate-800/50":"border-blue-500 bg-blue-500/10"])},[...e[5]||(e[5]=[K('<div class="w-8 h-8 mb-2 rounded-lg bg-blue-500/20 flex items-center justify-center" data-v-d8268f16><svg class="w-4 h-4 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d8268f16><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-d8268f16></path></svg></div><div class="font-bold text-white" data-v-d8268f16>é™æ€æ¨¡å¼</div><div class="text-xs text-slate-400 mt-1" data-v-d8268f16>é¢„è®¾å‰§æœ¬ï¼Œæ— éœ€ API</div>',3)])],2)])]),u.value?(a(),o("div",Ae,[e[8]||(e[8]=t("div",{class:"text-sm font-medium text-slate-400 mb-3"},"AI æ¨¡å‹",-1)),r(q,{modelValue:O.value,"onUpdate:modelValue":e[2]||(e[2]=s=>O.value=s),placeholder:"é€‰æ‹©æ¨¡å‹",class:"w-full",size:"large"},{default:l(()=>[(a(!0),o(z,null,G(p(m),s=>(a(),H(I,{key:s.id,label:s.name,value:s.id},{default:l(()=>[t("div",je,[t("span",null,x(s.name),1),t("span",Be,x(s.description),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),p(h).apiKey?g("",!0):(a(),o("div",Oe,[...e[7]||(e[7]=[t("div",{class:"text-sm text-amber-400"}," æœªé…ç½® API Keyï¼Œè¯·å…ˆåœ¨ä¸»é¡µè®¾ç½® ",-1)])]))])):g("",!0),t("button",{onClick:oe,disabled:u.value&&!p(h).apiKey,class:b(["w-full py-4 rounded-xl font-bold text-lg tracking-wider transition-all duration-300",u.value&&!p(h).apiKey?"bg-slate-700 text-slate-500 cursor-not-allowed":"bg-gradient-to-r from-amber-500 to-orange-500 text-white hover:from-amber-400 hover:to-orange-400 shadow-lg shadow-amber-500/30"])}," å¼€å§‹æ¸¸æˆ ",10,Pe)]),e[10]||(e[10]=t("div",{class:"mt-8 text-slate-500 text-sm"}," ç‚¹å‡»å±å¹•æ¨è¿›å‰§æƒ… Â· é€‰æ‹©å†³å®šå‘½è¿ ",-1))])]))}}}),Ft=Ie(xt,[["__scopeId","data-v-d8268f16"]]);export{Ft as default};
