System.register(["./vue-legacy-wnYe26o5.js","./pinia-legacy-C3Fkhy1N.js","./deepseekService-legacy-xgfgSVLw.js","./vue-helper-legacy-DgAO6S8O.js","./api-legacy-A7WOUcGB.js"],(function(e,a){"use strict";var t,s,l,i,r,n,o,d,u,c,p,v,g,b,m,x,f,h,y,w,k,I,S,C,M,P;return{setters:[e=>{t=e.j,s=e.r,l=e.w,i=e.f,r=e.H,n=e.q,o=e.B,d=e.v,u=e.I,c=e.J,p=e.K,v=e.O,g=e.P,b=e.Q,m=e.D,x=e.L,f=e.F,h=e.M,y=e.R,w=e.E,k=e.x},e=>{I=e.d},e=>{S=e.D,C=e.u},e=>{M=e._},e=>{P=e.u}],execute:function(){var a=document.createElement("style");a.textContent="[data-v-70fd8bee]:root{color-scheme:light}.custom-scrollbar[data-v-70fd8bee]{scrollbar-width:thin;scrollbar-color:rgba(99,102,241,.3) rgba(241,245,249,.1)}.custom-scrollbar[data-v-70fd8bee]::-webkit-scrollbar{width:6px}.custom-scrollbar[data-v-70fd8bee]::-webkit-scrollbar-track{background:rgba(241,245,249,.1);border-radius:3px}.custom-scrollbar[data-v-70fd8bee]::-webkit-scrollbar-thumb{background-color:rgba(99,102,241,.3);border-radius:3px}@keyframes fadeIn-70fd8bee{0%{opacity:0}to{opacity:1}}.animate-fadeIn[data-v-70fd8bee]{animation:fadeIn-70fd8bee .5s ease-in-out}.game-view-container[data-v-d88ade8b]{width:100%;height:100%}\n/*$vite$:1*/",document.head.appendChild(a);const Q=I("game",{state:()=>({playerName:"",currentSceneId:1,currentScene:void 0,isGenerating:!1,aiErrorMessage:"",gameLogs:[],storyProgress:{mainQuests:{gaming:0,study:0,social:0},relationships:{"李雪":{character:"李雪",affinity:0,events:[]},"王老师":{character:"王老师",affinity:0,events:[]}},flags:new Set},initialScene:{id:1,image:"https://source.unsplash.com/800x500/?classroom,student,chinese&t="+Date.now(),description:'高考倒计时30天，某市第一高中的教室里，小明正心不在焉地听着班主任王老师讲解数学题。但他的心思完全在今晚的游戏排位赛上 —— 作为服务器知名的剑魔玩家"最强剑魔"，他已经连续29天冲击王者失败了。昨晚的直播间里，他又因为激动地大喊"回答我！"把麦克风震炸了。',dialog:'（小明看着手机里的游戏战绩，自言自语）"怎么不找找自己的问题呢...这把打完我要是能拿MVP就好了。"',options:[{text:"专心听课",next:2,hint:"做一个好学生",impact:{quest:{type:"study",value:10},relationship:{character:"王老师",value:5}}},{text:"继续研究剑魔连招",next:3,hint:"今晚一定要上王者",impact:{quest:{type:"gaming",value:10},relationship:{character:"王老师",value:-5}}},{text:"给李雪递纸条",next:4,hint:"要不要约她双排？",impact:{quest:{type:"social",value:5},relationship:{character:"李雪",value:10}}}],context:{mood:"焦虑",location:"教室",timeOfDay:"上午",previousEvents:["昨晚直播麦克风炸了","连续29天冲击王者失败"]},specialEvent:"王老师正在讲解一道高考压轴题，黑板上写满了公式。小明的手机里还在循环播放着昨晚的直播片段。"}}),actions:{setPlayerName(e){this.playerName=e},async startNewGame(){this.currentScene=this.initialScene,this.currentSceneId=1,this.gameLogs=[],this.addGameLog(1,"游戏开始")},async handleChoice(e){try{this.isGenerating=!0,this.aiErrorMessage="";const a=e.text;this.addGameLog(this.currentSceneId,a),e.impact&&this.processImpact(e.impact);const t=await S.generateScene({playerName:this.playerName,currentSceneId:this.currentSceneId,choiceText:a,currentScene:this.currentScene,storyProgress:this.storyProgress,streamCallbacks:{onReasoningUpdate:e=>{this.updateReasoningStream(e)},onDialogUpdate:e=>{this.updateDialogStream(e)}}});this.currentScene=t,this.currentSceneId=t.id}catch(a){this.aiErrorMessage="生成场景失败: "+(a.message||"未知错误")}finally{this.isGenerating=!1}},processImpact(e){if(e.quest){const{type:a,value:t}=e.quest;a&&"number"==typeof t&&("gaming"===a&&(this.storyProgress.mainQuests.gaming=Math.min(100,this.storyProgress.mainQuests.gaming+t)),"study"===a&&(this.storyProgress.mainQuests.study=Math.min(100,this.storyProgress.mainQuests.study+t)),"social"===a&&(this.storyProgress.mainQuests.social=Math.min(100,this.storyProgress.mainQuests.social+t)))}if(e.relationship){const{character:a,value:t}=e.relationship;if(a&&"number"==typeof t&&this.storyProgress.relationships[a]&&(this.storyProgress.relationships[a].affinity+=t,0!==t)){const e=t>0?"关系改善":"关系恶化";this.storyProgress.relationships[a].events.push(e)}}e.flag&&this.storyProgress.flags.add(e.flag)},updateReasoningStream(e){},updateDialogStream(e){},addGameLog(e,a){this.gameLogs.push({sceneId:e,choiceText:a,timestamp:(new Date).toISOString()})},resetGame(){this.currentScene=this.initialScene,this.currentSceneId=1,this.gameLogs=[],this.isGenerating=!1,this.aiErrorMessage="",this.storyProgress={mainQuests:{gaming:0,study:0,social:0},relationships:{"李雪":{character:"李雪",affinity:0,events:[]},"王老师":{character:"王老师",affinity:0,events:[]}},flags:new Set}}}}),U={class:"min-h-screen bg-slate-50 bg-[radial-gradient(ellipse_80%_80%_at_50%_-20%,rgba(94,114,228,0.05),rgba(255,255,255,0))]"},j={key:0,class:"max-w-5xl mx-auto px-6 py-12"},A={class:"relative rounded-3xl overflow-hidden bg-white p-12 text-center min-h-[600px] shadow-lg shadow-indigo-100/50 border border-slate-100"},N={class:"relative z-10 w-full max-w-md mx-auto mb-8"},G={class:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-slate-100 shadow-sm"},_={class:"space-y-4"},V={class:"flex flex-wrap gap-2"},W=["onClick"],z={class:"relative z-10 w-full max-w-md mx-auto"},B={class:"bg-white/80 backdrop-blur-xl rounded-2xl p-8 border border-slate-100 shadow-sm"},D={class:"mb-8"},J={class:"relative group"},E=["disabled"],Z={key:1,class:"max-w-5xl mx-auto px-6 py-12"},F={class:"rounded-3xl overflow-hidden bg-white border border-slate-100 shadow-lg shadow-indigo-100/50"},q={class:"bg-slate-50 border-b border-slate-100 p-6"},L={class:"flex items-center justify-between"},O={class:"flex items-center gap-4"},R={class:"text-lg font-bold text-slate-800"},T={class:"flex items-center gap-4"},K={class:"px-4 py-2 rounded-xl bg-slate-50 border border-slate-200 text-slate-700"},H={class:"p-8 space-y-6 bg-white"},Y={class:"mb-6 border border-slate-100 rounded-2xl overflow-hidden bg-white"},X={class:"flex border-b border-slate-100"},$={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-indigo-500"},ee={class:"flex items-center justify-center gap-2"},ae={key:0,class:"inline-flex items-center px-2 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-medium"},te={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-purple-500"},se={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-red-500"},le={class:"p-6"},ie={key:0,class:"animate-fadeIn"},re={class:"flex gap-4"},ne={key:0,class:"text-slate-600 italic"},oe={class:"text-slate-600 italic"},de={key:1,class:"animate-fadeIn"},ue={class:"flex gap-4"},ce={key:0,class:"text-slate-600 italic"},pe={class:"text-slate-700 leading-relaxed"},ve={key:2,class:"animate-fadeIn"},ge={class:"bg-red-50 rounded-lg p-4 border border-red-100"},be={class:"flex items-start gap-3"},me={class:"font-bold text-red-700 flex items-center gap-2"},xe={key:0},fe={class:"text-red-600 mt-1 mb-2"},he={key:0,class:"text-sm space-y-2 text-slate-700"},ye={class:"bg-slate-50 rounded-2xl p-6 border border-slate-100 mb-6"},we={class:"text-slate-700 text-lg leading-relaxed"},ke={key:0,class:"relative overflow-hidden bg-slate-50 rounded-2xl p-6 border border-indigo-100 mb-6"},Ie={class:"flex gap-4"},Se={class:"text-slate-600"},Ce={class:"grid grid-cols-3 gap-4 mb-6"},Me={class:"bg-white rounded-xl border border-slate-100 p-4"},Pe={class:"w-full bg-slate-100 rounded-full h-2"},Qe={class:"bg-white rounded-xl border border-slate-100 p-4"},Ue={class:"w-full bg-slate-100 rounded-full h-2"},je={class:"bg-white rounded-xl border border-slate-100 p-4"},Ae={class:"w-full bg-slate-100 rounded-full h-2"},Ne=["onClick"],Ge={class:"relative bg-slate-50 rounded-2xl p-6 border border-slate-100 transform group-hover:-translate-y-1 transition-all duration-300 group-hover:shadow-md group-hover:shadow-indigo-100/50"},_e={class:"text-slate-700 font-medium mb-2"},Ve={key:0,class:"text-slate-500 text-sm italic"},We={class:"space-y-4"},ze={class:"text-lg font-medium text-slate-800"},Be={class:"mt-2 space-y-2"},De={key:0,class:"flex items-start gap-2"},Je={key:1,class:"flex items-start gap-2"},Ee={key:2,class:"flex items-start gap-2"},Ze={key:3,class:"flex items-start gap-2"},Fe={key:3,class:"fixed inset-0 bg-white/90 backdrop-blur-sm flex items-center justify-center z-50"},qe={key:4,class:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50"},Le={class:"relative"},Oe={class:"relative bg-white px-6 py-4 rounded-xl border border-red-100 text-red-500 flex items-center gap-3 shadow-lg shadow-red-100/50"},Re={class:"font-medium"},Te=M(t({__name:"GiaoGame",props:{apiBaseUrl:{type:String,default:""}},setup(e){const a=e,t=Q(),k=s(""),I=s(!0),S=s(""),M=s("eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkMWRjMzFlLWI0ZDAtNDQ4Yi1hNzZmLWIwY2M2M2Q4MTQ5OCJ9.eyJhdWQiOiJ0ZXN0LWFwcDAtOWd5dXBrbWkxMGVkMjY1NCIsImV4cCI6MjUzNDAyMzAwNzk5LCJpYXQiOjE3NDI0MzY1NTIsImF0X2hhc2giOiJVVDF4a1FVd0VmQ0U5MUpVQUdrb2xRIiwicHJvamVjdF9pZCI6InRlc3QtYXBwMC05Z3l1cGttaTEwZWQyNjU0IiwibWV0YSI6eyJwbGF0Zm9ybSI6IkFwaUtleSJ9fQ.iJ2AlVeFSgyUP9K2ntHahG91TXtG57N86MT12UVpca7fWCZJ4Zqox5cdNJ3uj97DZbzN4q6wah0dZgVt_xqNZrMIvQMfgFc0uiA4gZiUOA6lJKgi33voC4dLWxqJ-_dYr_9XuHI6PPWW5Wy70jGotrVrrFFtUdxB0CJR3-mGHmlTemWMlDcIH3Ot7KZloBSTpC4MITr1i3xYSix8hHp_ClSf1ORKqAj7WXyBjwte7YBf8EIzehnlbpN_Z9sSwv8R_W4zcmEKAs_rTnWdTXGSFKLEl7lbHmpH3n5M4iRoGH9x3YVnZ8i8BXRMp6rBj2n2jqaIrcBrDJTd1ECGNF59tA"),P=s("deepseek-r1");s("story"),s("");const Te=s(!1),Ke=s(!1),He=s(""),Ye=s(!1),Xe=s(""),$e=s(!1),ea=s({gaming:25,study:10,social:5});s([{role:"assistant",content:"欢迎来到 AI 互动游戏！请选择你想要的游戏模式，我们将开始一段奇妙的旅程。"}]);const aa=s(!1),ta={400:{title:"格式错误",reason:"请求体格式错误",solution:"请根据错误信息提示修改请求体"},401:{title:"认证失败",reason:"API key 错误，认证失败",solution:"请检查您的 API key 是否正确，如没有 API key，请先创建 API key"},402:{title:"余额不足",reason:"账号余额不足",solution:"请确认账户余额，并前往充值页面进行充值"},422:{title:"参数错误",reason:"请求体参数错误",solution:"请根据错误信息提示修改相关参数"},429:{title:"请求速率达到上限",reason:"请求速率（TPM 或 RPM）达到上限",solution:"请合理规划您的请求速率"},500:{title:"服务器故障",reason:"服务器内部故障",solution:"请等待后重试。若问题一直存在，请联系我们解决"},503:{title:"服务器繁忙",reason:"服务器负载过高",solution:"请稍后重试您的请求"}},sa=s({show:!1,code:"",message:"",details:null}),la=s("dialog");l((()=>a.apiBaseUrl),(e=>{e&&(S.value=e,C({baseUrl:e}))}),{immediate:!0});const ia=i((()=>t.currentScene)),ra=i((()=>t.isGenerating)),na=i((()=>t.aiErrorMessage)),oa=e=>{P.value=e,C({baseUrl:S.value,apiKey:M.value,model:e})},da=async()=>{if(k.value){S.value&&C({baseUrl:S.value,apiKey:M.value,model:P.value}),Te.value=!0;try{t.setPlayerName(k.value),I.value=!1,await t.startNewGame(),pa()}catch(e){alert("游戏启动失败，请检查API设置或稍后再试")}finally{Te.value=!1}}else alert("请输入你的名字")},ua=()=>{t.$onAction((({name:e,args:a})=>{"updateReasoningStream"===e&&a[0]&&(He.value+=a[0],"deepseek-chat"!==P.value&&He.value&&"dialog"===la.value&&(la.value="reasoning")),"updateDialogStream"===e&&a[0]&&(Xe.value+=a[0],Xe.value&&"reasoning"===la.value&&(la.value="dialog"))})),aa.value=!0},ca=e=>{if(e.quest){const{type:a,value:t}=e.quest;"gaming"===a&&(ea.value.gaming=Math.min(100,ea.value.gaming+t)),"study"===a&&(ea.value.study=Math.min(100,ea.value.study+t)),"social"===a&&(ea.value.social=Math.min(100,ea.value.social+t))}},pa=()=>{ea.value={gaming:t.storyProgress?.mainQuests?.gaming||25,study:t.storyProgress?.mainQuests?.study||10,social:t.storyProgress?.mainQuests?.social||5}},va=()=>{confirm("确定要重置游戏进度吗？")&&(Xe.value="",t.resetGame(),ea.value={gaming:25,study:10,social:5})},ga=()=>{Ke.value=!Ke.value},ba=()=>{const e=["deepseek-r1","deepseek-chat","QwQ-32B"],a=(e.indexOf(P.value)+1)%e.length;oa(e[a]),Ke.value=!1},ma=e=>{la.value=e},xa=e=>{if(e?.response?.status){const a=e.response.status.toString();sa.value={show:!0,code:a,message:e.message||"未知错误",details:ta[a]||null},la.value="error"}else sa.value={show:!0,code:"UNKNOWN",message:e.message||"未知错误",details:null},la.value="error"},fa=()=>{sa.value.show=!1,"error"===la.value&&(la.value="dialog")};return r((()=>{a.apiBaseUrl?S.value=a.apiBaseUrl:S.value="https://test-app0-9gyupkmi10ed2654.api.tcloudbasegateway.com/v1/ai/deepseek/v1",C({baseUrl:S.value,apiKey:M.value,model:P.value}),ua()})),(e,a)=>(w(),n("div",U,[ia.value?(w(),n("div",Z,[d("div",F,[d("div",q,[d("div",L,[d("div",O,[a[16]||(a[16]=d("div",{class:"w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 to-blue-500 p-[1px]"},[d("div",{class:"w-full h-full rounded-[10px] bg-white flex items-center justify-center"},[d("span",{class:"text-2xl"},"⚔️")])],-1)),d("div",null,[d("div",R,m(k.value),1),a[15]||(a[15]=d("div",{class:"text-sm text-slate-500"},"见习剑客",-1))])]),d("div",T,[d("div",K," 第 "+m(ia.value.id)+" 章 ",1),d("button",{onClick:ga,class:x(["px-4 py-2 rounded-xl border transition-colors duration-200",["deepseek-r1"===P.value?"bg-purple-50 text-purple-700 border-purple-200":"bg-blue-50 text-blue-700 border-blue-200"]])},m(P.value),3),d("button",{onClick:va,class:"group px-4 py-2 rounded-xl bg-slate-50 border border-slate-200 text-slate-700 hover:bg-slate-100 transition-all duration-300"},a[17]||(a[17]=[d("span",{class:"flex items-center gap-2"},[d("span",{class:"text-lg group-hover:rotate-180 transition-transform duration-500"},"🔄"),d("span",{class:"hidden sm:inline"},"重新开始")],-1)]))])])]),d("div",H,[d("div",Y,[d("div",X,[d("button",{onClick:a[3]||(a[3]=e=>ma("dialog")),class:x(["flex-1 py-3 text-sm font-medium transition-colors duration-200 relative","dialog"===la.value?"text-indigo-600 bg-indigo-50/50":"text-slate-600 hover:text-slate-800 hover:bg-slate-50"])},[a[18]||(a[18]=d("span",{class:"flex items-center justify-center gap-2"},[d("span",{class:"text-lg"},"💭"),d("span",null,"对话内容")],-1)),"dialog"===la.value?(w(),n("span",$)):o("",!0)],2),"deepseek-chat"!==P.value?(w(),n("button",{key:0,onClick:a[4]||(a[4]=e=>ma("reasoning")),class:x(["flex-1 py-3 text-sm font-medium transition-colors duration-200 relative","reasoning"===la.value?"text-purple-600 bg-purple-50/50":"text-slate-600 hover:text-slate-800 hover:bg-slate-50"])},[d("span",ee,[a[20]||(a[20]=d("span",{class:"text-lg"},"🤔",-1)),a[21]||(a[21]=d("span",null,"思维过程",-1)),Ye.value&&!He.value?(w(),n("span",ae,a[19]||(a[19]=[f(" 思考中 "),d("span",{class:"ml-1 flex space-x-1"},[d("span",{class:"w-1 h-1 bg-purple-700 rounded-full animate-bounce",style:{"animation-delay":"0s"}}),d("span",{class:"w-1 h-1 bg-purple-700 rounded-full animate-bounce",style:{"animation-delay":"0.1s"}}),d("span",{class:"w-1 h-1 bg-purple-700 rounded-full animate-bounce",style:{"animation-delay":"0.2s"}})],-1)]))):o("",!0)]),"reasoning"===la.value?(w(),n("span",te)):o("",!0)],2)):o("",!0),sa.value.show?(w(),n("button",{key:1,onClick:a[5]||(a[5]=e=>ma("error")),class:x(["flex-1 py-3 text-sm font-medium transition-colors duration-200 relative","error"===la.value?"text-red-600 bg-red-50/50":"text-slate-600 hover:text-slate-800 hover:bg-slate-50"])},[a[22]||(a[22]=d("span",{class:"flex items-center justify-center gap-2"},[d("span",{class:"text-lg"},"⚠️"),d("span",null,"错误信息")],-1)),"error"===la.value?(w(),n("span",se)):o("",!0)],2)):o("",!0)]),d("div",le,["dialog"===la.value?(w(),n("div",ie,[d("div",re,[a[24]||(a[24]=d("div",{class:"text-2xl shrink-0"},"💭",-1)),ra.value&&!Xe.value?(w(),n("div",ne,a[23]||(a[23]=[u('<div class="flex items-center text-slate-500" data-v-70fd8bee><span data-v-70fd8bee>AI正在生成对话</span><span class="ml-2 flex space-x-1" data-v-70fd8bee><span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay:0s;" data-v-70fd8bee></span><span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay:0.1s;" data-v-70fd8bee></span><span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-70fd8bee></span></span></div>',1)]))):o("",!0),d("p",oe,m(Xe.value||(ia.value?ia.value.dialog:"")),1)])])):"reasoning"===la.value?(w(),n("div",de,[d("div",ue,[a[26]||(a[26]=d("div",{class:"text-2xl shrink-0"},"🤔",-1)),ra.value&&!He.value?(w(),n("div",ce,a[25]||(a[25]=[u('<div class="flex items-center text-slate-500" data-v-70fd8bee><span data-v-70fd8bee>AI正在生成思维过程</span><span class="ml-2 flex space-x-1" data-v-70fd8bee><span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay:0s;" data-v-70fd8bee></span><span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay:0.1s;" data-v-70fd8bee></span><span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-70fd8bee></span></span></div>',1)]))):o("",!0),d("p",pe,m(He.value||(ia.value?ia.value.reasoning:"")),1)])])):"error"===la.value?(w(),n("div",ve,[d("div",ge,[d("div",be,[a[29]||(a[29]=d("div",{class:"text-2xl text-red-500 shrink-0"},"⚠️",-1)),d("div",null,[d("h3",me,[d("span",null,"错误 "+m(sa.value.code),1),sa.value.details?(w(),n("span",xe,"- "+m(sa.value.details.title),1)):o("",!0)]),d("p",fe,m(sa.value.message),1),sa.value.details?(w(),n("div",he,[d("p",null,[a[27]||(a[27]=d("span",{class:"font-medium"},"原因：",-1)),d("span",null,m(sa.value.details.reason),1)]),d("p",null,[a[28]||(a[28]=d("span",{class:"font-medium"},"解决方法：",-1)),d("span",null,m(sa.value.details.solution),1)])])):o("",!0),d("div",{class:"mt-4"},[d("button",{onClick:fa,class:"px-3 py-1 text-xs rounded bg-red-100 text-red-700 hover:bg-red-200 transition-colors"}," 关闭错误提示 ")])])])])])):o("",!0)])]),d("div",ye,[d("p",we,m(ia.value.description),1)]),ia.value.specialEvent?(w(),n("div",ke,[a[32]||(a[32]=d("div",{class:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-indigo-200 to-blue-200"},null,-1)),d("div",Ie,[a[31]||(a[31]=d("div",{class:"text-2xl"},"⚡",-1)),d("div",null,[a[30]||(a[30]=d("h3",{class:"font-bold text-slate-800 mb-2"},"特殊事件",-1)),d("p",Se,m(ia.value.specialEvent),1)])])])):o("",!0),d("div",Ce,[d("div",Me,[a[33]||(a[33]=d("div",{class:"text-sm text-slate-500 mb-1"},"游戏技能",-1)),d("div",Pe,[d("div",{class:"bg-blue-500 h-2 rounded-full",style:h(`width: ${ea.value.gaming}%`)},null,4)])]),d("div",Qe,[a[34]||(a[34]=d("div",{class:"text-sm text-slate-500 mb-1"},"学习能力",-1)),d("div",Ue,[d("div",{class:"bg-green-500 h-2 rounded-full",style:h(`width: ${ea.value.study}%`)},null,4)])]),d("div",je,[a[35]||(a[35]=d("div",{class:"text-sm text-slate-500 mb-1"},"社交关系",-1)),d("div",Ae,[d("div",{class:"bg-purple-500 h-2 rounded-full",style:h(`width: ${ea.value.social}%`)},null,4)])])]),d("div",{class:x(["space-y-4",{"opacity-50 pointer-events-none":ra.value}])},[(w(!0),n(v,null,g(ia.value.options,(e=>(w(),n("div",{key:e.text,class:"group cursor-pointer relative overflow-hidden",onClick:a=>!ra.value&&(async e=>{try{He.value="",Xe.value="",Ye.value="deepseek-chat"!==P.value,$e.value=!0,fa(),aa.value||ua(),e.impact&&ca(e.impact),"deepseek-chat"===P.value?la.value="dialog":la.value="reasoning",await t.handleChoice(e),Ye.value=!1,$e.value=!1}catch(a){Ye.value=!1,$e.value=!1,xa(a)}})(e)},[a[36]||(a[36]=d("div",{class:"absolute inset-0 bg-gradient-to-r from-indigo-50 to-blue-50 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),d("div",Ge,[d("div",_e,m(e.text),1),e.hint?(w(),n("div",Ve,m(e.hint),1)):o("",!0)])],8,Ne)))),128))],2)])])])):(w(),n("div",j,[d("div",A,[a[14]||(a[14]=u('<div class="absolute inset-0 bg-[radial-gradient(circle_at_50%_120%,rgba(94,114,228,0.05),rgba(255,255,255,0))]" data-v-70fd8bee></div><div class="absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-indigo-100 to-transparent" data-v-70fd8bee></div><div class="relative z-10 mb-16" data-v-70fd8bee><div class="inline-block" data-v-70fd8bee><div class="relative" data-v-70fd8bee><h1 class="text-5xl sm:text-6xl font-bold text-slate-800 pb-2 tracking-tight" data-v-70fd8bee> 最强剑魔是高三生 </h1><div class="absolute -bottom-2 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-indigo-200 to-transparent" data-v-70fd8bee></div></div><p class="mt-6 text-lg text-slate-500" data-v-70fd8bee>一段关于剑道、学业与青春的传奇</p></div></div>',3)),d("div",N,[d("div",G,[a[11]||(a[11]=d("h3",{class:"text-lg font-medium text-slate-700 mb-4"},"API 设置",-1)),d("div",_,[d("div",null,[a[8]||(a[8]=d("label",{class:"block text-sm text-slate-600 mb-1"},"API 地址",-1)),c(d("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>S.value=e),type:"text",placeholder:"请输入API地址",class:"w-full px-4 py-2 bg-slate-50 rounded-lg border border-slate-200 text-slate-700 text-sm focus:outline-none focus:border-indigo-200 focus:ring-2 focus:ring-indigo-100"},null,512),[[p,S.value]])]),d("div",null,[a[9]||(a[9]=d("label",{class:"block text-sm text-slate-600 mb-1"},"API key",-1)),c(d("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>M.value=e),type:"password",placeholder:"没有可以去deepseek官网注册",class:"w-full px-4 py-2 bg-slate-50 rounded-lg border border-slate-200 text-slate-700 text-sm focus:outline-none focus:border-indigo-200 focus:ring-2 focus:ring-indigo-100"},null,512),[[p,M.value]])]),d("div",null,[a[10]||(a[10]=d("label",{class:"block text-sm text-slate-600 mb-1"},"模型选择",-1)),d("div",V,[(w(),n(v,null,g(["deepseek-r1","deepseek-chat","QwQ-32B"],(e=>d("button",{key:e,onClick:a=>oa(e),class:x(["px-3 py-1 text-sm rounded-md transition-colors duration-200",P.value===e?"bg-indigo-100 text-indigo-700 border border-indigo-200":"bg-slate-50 text-slate-600 border border-slate-200 hover:bg-slate-100"])},m(e),11,W))),64))])])])])]),d("div",z,[d("div",B,[d("div",D,[d("div",J,[c(d("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>k.value=e),type:"text",placeholder:"输入你的名字，剑客",class:"w-full px-14 py-4 bg-slate-50 rounded-xl border border-slate-200 text-slate-700 placeholder-slate-400 focus:outline-none focus:border-indigo-200 focus:ring-2 focus:ring-indigo-100 transition-all duration-300",onKeyup:b(da,["enter"])},null,544),[[p,k.value]]),a[12]||(a[12]=d("span",{class:"absolute left-5 top-1/2 -translate-y-1/2 text-2xl text-slate-400 group-focus-within:text-indigo-400 transition-colors duration-300"},"⚔️",-1))])]),d("button",{onClick:da,disabled:!k.value,class:"relative w-full group"},a[13]||(a[13]=[d("div",{class:"relative bg-gradient-to-r from-indigo-500 to-blue-500 rounded-xl px-6 py-4 text-white font-medium transform group-hover:-translate-y-1 group-active:translate-y-0 transition-all duration-300 shadow-md shadow-indigo-100"},[d("span",{class:"flex items-center justify-center gap-3"},[d("span",{class:"text-lg"},"开启传奇"),d("span",{class:"text-xl"},"🗡️")])],-1)]),8,E)])])])])),Ke.value?(w(),n("div",{key:2,class:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50",onClick:a[7]||(a[7]=e=>Ke.value=!1)},[d("div",{class:"relative bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-xl",onClick:a[6]||(a[6]=y((()=>{}),["stop"]))},[a[44]||(a[44]=d("h2",{class:"text-2xl font-bold text-slate-800 mb-4"},"AI模型信息",-1)),d("div",We,[d("div",null,[a[37]||(a[37]=d("h3",{class:"text-sm font-medium text-slate-500"},"当前模型",-1)),d("p",ze,m(P.value),1)]),d("div",null,[a[43]||(a[43]=d("h3",{class:"text-sm font-medium text-slate-500"},"模型特点",-1)),d("ul",Be,["deepseek-r1"===P.value?(w(),n("li",De,a[38]||(a[38]=[d("span",{class:"text-purple-500 mt-0.5"},"✓",-1),d("span",{class:"text-slate-700"},"支持思维链展示，可观察AI思考过程",-1)]))):o("",!0),"deepseek-r1"===P.value?(w(),n("li",Je,a[39]||(a[39]=[d("span",{class:"text-purple-500 mt-0.5"},"✓",-1),d("span",{class:"text-slate-700"},"更强的推理和剧情架构能力",-1)]))):o("",!0),"deepseek-chat"===P.value?(w(),n("li",Ee,a[40]||(a[40]=[d("span",{class:"text-blue-500 mt-0.5"},"✓",-1),d("span",{class:"text-slate-700"},"更流畅的对话体验",-1)]))):o("",!0),"QwQ-32B"===P.value?(w(),n("li",Ze,a[41]||(a[41]=[d("span",{class:"text-blue-500 mt-0.5"},"✓",-1),d("span",{class:"text-slate-700"},"更大模型参数，知识面更广",-1)]))):o("",!0),a[42]||(a[42]=d("li",{class:"flex items-start gap-2"},[d("span",{class:"text-green-500 mt-0.5"},"✓"),d("span",{class:"text-slate-700"},"实时流式生成，响应更快")],-1))])]),d("div",{class:"pt-4"},[d("button",{onClick:ba,class:"w-full py-3 bg-gradient-to-r from-indigo-500 to-blue-500 text-white rounded-xl font-medium"}," 切换模型 ")])])])])):o("",!0),ra.value&&!$e.value?(w(),n("div",Fe,a[45]||(a[45]=[u('<div class="relative" data-v-70fd8bee><div class="relative bg-white rounded-2xl p-8 border border-slate-100 shadow-lg shadow-indigo-100/50" data-v-70fd8bee><div class="w-16 h-16 mx-auto mb-4" data-v-70fd8bee><svg class="animate-spin w-full h-full text-indigo-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-70fd8bee><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-70fd8bee></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-70fd8bee></path></svg></div><p class="text-slate-800 text-lg font-medium text-center" data-v-70fd8bee>正在书写剧情...</p></div></div>',1)]))):o("",!0),na.value?(w(),n("div",qe,[d("div",Le,[d("div",Oe,[a[46]||(a[46]=d("span",{class:"text-xl"},"❌",-1)),d("span",Re,m(na.value),1)])])])):o("",!0)]))}}),[["__scopeId","data-v-70fd8bee"]]),Ke={class:"game-view-container"};e("default",M(t({__name:"GameView",setup(e){const a=P(),t=s(a.apiUrl);return r((()=>{const e=localStorage.getItem("apiUrl");e&&(t.value=e,a.setApiUrl(e))})),(e,a)=>(w(),n("div",Ke,[k(Te,{"api-base-url":t.value},null,8,["api-base-url"])]))}}),[["__scopeId","data-v-d88ade8b"]]))}}}));
