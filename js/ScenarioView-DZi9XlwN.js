/* empty css                  *//* empty css                   */import{j as W,r as c,f as x,B as $,H as n,Y as r,J as a,R as i,_ as v,W as u,X as M,ad as q,a2 as S,M as h,T as m,Q as D,U as J,u as k,V as E,I as s}from"./vue-CjgK3QL3.js";import{c as K,E as U,v as X,P as Y,Q as A,R as Z,r as ee}from"./index-BVR5S9ug.js";import{_ as te}from"./vue-helper-DlAUqK2U.js";import"./pinia-BjCkHraf.js";import"./vue-router-7CHpTyhd.js";const ae=["src"],se={key:1,class:"w-full h-full bg-gradient-to-br from-slate-950 via-slate-900 to-indigo-950"},le={key:0,class:"absolute inset-0 z-[100] bg-white pointer-events-none"},ne={class:"absolute top-0 left-0 w-full z-20 p-6 flex justify-between items-start pointer-events-none"},oe={class:"flex flex-col gap-1 animate-fade-in-down"},re={class:"flex items-center gap-2 text-xs text-amber-200/60 font-mono tracking-widest pl-3.5"},ie={class:"flex gap-3 pointer-events-auto"},de={class:"absolute inset-0 z-10 flex flex-col justify-end pb-8 md:pb-12 px-4 md:px-20 lg:px-40 pointer-events-none"},ce={class:"absolute inset-0 pointer-events-none overflow-hidden"},ue={key:0,class:"absolute bottom-0 right-0 md:right-[10%] h-[60vh] md:h-[75vh] w-auto drop-shadow-2xl filter brightness-90 contrast-110 overflow-hidden"},me=["src"],fe={class:"relative w-full max-w-5xl mx-auto z-30 pointer-events-auto"},pe={key:0,class:"absolute -top-10 left-0 md:left-4 z-40"},ve={class:"px-6 py-2 bg-slate-900/90 border-l-4 border-amber-500 text-white font-bold tracking-widest text-lg shadow-lg skew-x-[-10deg]"},be={class:"skew-x-[10deg] inline-block"},ge={class:"text-lg md:text-xl text-slate-200 leading-relaxed font-medium tracking-wide font-sans text-shadow-sm min-h-[80px]"},xe=["innerHTML"],_e={key:0,class:"inline-block w-2 h-5 ml-1 bg-amber-400 animate-pulse align-middle shadow-[0_0_8px_rgba(251,191,36,0.8)]"},he={key:0,class:"absolute bottom-4 right-6 flex items-center gap-2 animate-bounce text-amber-400/80"},ke={key:0,class:"absolute bottom-[184%] left-0 w-full flex flex-col items-center gap-3 z-50"},we=["disabled","onClick"],ye={class:"relative px-6 py-4 flex items-center justify-between text-left"},Ce={class:"text-xs opacity-50 font-mono border border-current px-1.5 rounded"},Fe={key:0,class:"flex items-center text-xs text-red-400 gap-1 bg-black/40 px-2 py-1 rounded border border-red-900/50"},Ie={key:1,class:"opacity-0 -translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 text-white"},Se={key:0,class:"absolute bottom-[130%] w-full flex flex-col items-center gap-4 z-50"},Ee={class:"text-6xl animate-pulse"},Te=W({__name:"ScenarioView",setup(ze){const w=c("start_01"),f=c(""),d=c(!1),y=c(!1),b=c(new Set),T=c(1),o=x(()=>scriptData[w.value]),C=x(()=>{if(!o.value)return!1;const e=o.value.options;if(o.value.isEnding||e.length!==1)return!1;const t=e[0];return!(t.reqFragment&&!b.value.has(t.reqFragment))}),z=x(()=>!d.value&&C.value),O=x(()=>{const e=o.value?.text||"";return e.includes("å¯„")||e.includes("æ­»")||e.includes("è½°")}),j=x(()=>o.value?o.value.options.map(e=>({...e,locked:e.reqFragment?!b.value.has(e.reqFragment):!1})):[]),R=e=>allFragments.find(t=>t.id===e)?.name||"æœªçŸ¥ç¢Žç‰‡",F=e=>b.value.has(e),H=()=>{B()},B=()=>{if(d.value){V();return}if(C.value){const e=o.value.options[0].nextSceneId;_(e)}};let g=null;const N=c(""),P=async e=>{d.value=!0,f.value="",N.value=e;let t=0;const I=40;return new Promise(p=>{g&&clearInterval(g),g=setInterval(()=>{if(t<e.length)if(e[t]==="<"){const l=e.indexOf(">",t);l!==-1&&(f.value+=e.substring(t,l+1),t=l+1)}else f.value+=e[t],t++;else V(p)},I)})},V=e=>{g&&clearInterval(g),f.value=N.value,d.value=!1,e&&e()},_=async e=>{const t=scriptData[e];t&&(w.value=e,t.unlockFragment&&!b.value.has(t.unlockFragment.id)&&(b.value.add(t.unlockFragment.id),U.success({message:`èŽ·å¾—è®°å¿†ç¢Žç‰‡: [${t.unlockFragment.name}]`,type:"success",duration:3e3,offset:100})),await P(t.text))},G=e=>{e.locked||_(e.nextSceneId)},Q=()=>{y.value=!0,T.value++,setTimeout(()=>{f.value="",_("start_01"),y.value=!1},800)};return $(()=>{_("start_01")}),(e,t)=>{const I=X,p=K;return s(),n("div",{class:"relative w-full h-screen overflow-hidden bg-slate-900 font-sans select-none",onClick:H},[r(v,{name:"fade-slow"},{default:i(()=>[(s(),n("div",{key:o.value?.bgImage||"default-bg",class:"absolute inset-0 z-0"},[o.value?.bgImage?(s(),n("img",{key:0,src:o.value.bgImage,class:"w-full h-full object-cover opacity-60 scale-105 animate-slow-pan",alt:"Background"},null,8,ae)):(s(),n("div",se)),t[0]||(t[0]=a("div",{class:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-black/20"},null,-1))]))]),_:1}),r(v,{name:"flash"},{default:i(()=>[y.value?(s(),n("div",le)):m("",!0)]),_:1}),a("div",ne,[a("div",oe,[t[2]||(t[2]=a("div",{class:"flex items-center gap-2"},[a("div",{class:"w-1.5 h-6 bg-amber-400 shadow-[0_0_10px_rgba(251,191,36,0.8)]"}),a("h1",{class:"text-2xl font-bold text-white tracking-widest uppercase drop-shadow-md"},"ç¬¬13å·åˆ—è½¦")],-1)),a("div",re,[a("span",null,"LOOP: "+u(T.value),1),t[1]||(t[1]=a("span",null,"|",-1)),a("span",null,"SCENE: "+u(w.value),1)])]),a("div",ie,[(s(!0),n(M,null,q(e.allFragments,l=>(s(),D(I,{key:l.id,content:F(l.id)?l.name:"æœªè§£é”",placement:"bottom",effect:"dark"},{default:i(()=>[a("div",{class:h(["relative flex items-center justify-center w-10 h-10 rounded-lg border backdrop-blur-md transition-all duration-500",F(l.id)?"border-amber-400/50 bg-amber-500/10 shadow-[0_0_15px_rgba(251,191,36,0.2)]":"border-white/10 bg-black/20 grayscale"])},[(s(),D(J(F(l.id)?"Key":"Lock"),{class:"w-4 h-4 text-amber-100"}))],2)]),_:2},1032,["content"]))),128))])]),a("div",de,[a("div",ce,[r(v,{name:"slide-fade"},{default:i(()=>[o.value?.character?(s(),n("div",ue,[a("img",{src:e.getCharacterImage(o.value.character),class:"h-full w-auto object-contain animate-float",alt:"Character"},null,8,me)])):m("",!0)]),_:1})]),a("div",fe,[r(v,{name:"fade"},{default:i(()=>[o.value?.speaker?(s(),n("div",pe,[a("div",ve,[a("span",be,u(o.value.speaker),1)])])):m("",!0)]),_:1}),a("div",{class:h(["relative bg-gradient-to-b from-slate-900/90 to-slate-950/95 backdrop-blur-xl border border-white/10 p-6 md:p-10 rounded-tr-3xl rounded-bl-3xl shadow-2xl transition-all duration-300 min-h-[180px] flex flex-col justify-between group active:scale-[0.99]",{"cursor-pointer hover:border-amber-500/30":z.value}]),onClick:S(B,["stop"])},[t[4]||(t[4]=a("div",{class:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-white/20 to-transparent"},null,-1)),a("div",ge,[a("span",{innerHTML:f.value},null,8,xe),d.value?(s(),n("span",_e)):m("",!0)]),z.value?(s(),n("div",he,[t[3]||(t[3]=a("span",{class:"text-xs font-mono tracking-widest uppercase opacity-70"},"Click to Continue",-1)),r(p,{class:"text-2xl"},{default:i(()=>[r(k(Y))]),_:1})])):m("",!0)],2),r(v,{name:"slide-up-fade"},{default:i(()=>[!d.value&&!C.value&&j.value.length>0?(s(),n("div",ke,[(s(!0),n(M,null,q(j.value,(l,L)=>(s(),n("button",{key:L,class:"relative w-full md:w-3/4 max-w-2xl group overflow-hidden transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]",disabled:l.locked,onClick:S(je=>G(l),["stop"])},[a("div",{class:h(["absolute inset-0 border transition-all duration-300",l.locked?"bg-slate-800/80 border-slate-700":"bg-black/60 backdrop-blur-md border-amber-500/30 group-hover:bg-amber-600/90 group-hover:border-amber-400"])},null,2),a("div",ye,[a("span",{class:h(["text-base md:text-lg font-medium tracking-wider transition-colors duration-300 flex items-center gap-3",l.locked?"text-slate-500":"text-slate-100 group-hover:text-white"])},[a("span",Ce,"0"+u(L+1),1),E(" "+u(l.text),1)],2),l.locked?(s(),n("span",Fe,[r(p,null,{default:i(()=>[r(k(A))]),_:1}),E(" éœ€: "+u(R(l.reqFragment)),1)])):(s(),n("span",Ie,[r(p,null,{default:i(()=>[r(k(Z))]),_:1})]))])],8,we))),128))])):m("",!0)]),_:1}),r(v,{name:"zoom-in"},{default:i(()=>[o.value?.isEnding&&!d.value?(s(),n("div",Se,[a("div",Ee,u(O.value?"ðŸ’€":"ðŸ”“"),1),a("button",{onClick:S(Q,["stop"]),class:"px-12 py-4 bg-red-600 hover:bg-red-500 text-white font-bold tracking-[0.2em] text-lg uppercase rounded shadow-[0_0_30px_rgba(220,38,38,0.6)] transition-all transform hover:scale-105 hover:rotate-1 flex items-center gap-3 border border-red-400"},[r(p,{class:"animate-spin-slow"},{default:i(()=>[r(k(ee))]),_:1}),t[5]||(t[5]=E(" Reboot System ",-1))])])):m("",!0)]),_:1})])])])}}}),Oe=te(Te,[["__scopeId","data-v-ca41be92"]]);export{Oe as default};
