import{j as Z,r as c,w as se,f as N,F,k as a,v as u,l as e,G as C,I as G,J as Q,N as T,O as L,P as ae,z as v,K as w,B as le,L as U,Q as oe,A as l,p as ie}from"./vue-core-Cz-nAsk4.js";import{d as ne}from"./state-BiIMoNJz.js";import{D as re,u as P}from"./deepseekService-Bj162g2B.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as de}from"./api-Ck5_-MwR.js";const ue=ne("game",{state:()=>({playerName:"",currentSceneId:1,currentScene:void 0,isGenerating:!1,aiErrorMessage:"",gameLogs:[],storyProgress:{mainQuests:{gaming:0,study:0,social:0},relationships:{李雪:{character:"李雪",affinity:0,events:[]},王老师:{character:"王老师",affinity:0,events:[]}},flags:new Set},initialScene:{id:1,image:"https://source.unsplash.com/800x500/?classroom,student,chinese&t="+Date.now(),description:'高考倒计时30天，某市第一高中的教室里，小明正心不在焉地听着班主任王老师讲解数学题。但他的心思完全在今晚的游戏排位赛上 —— 作为服务器知名的剑魔玩家"最强剑魔"，他已经连续29天冲击王者失败了。昨晚的直播间里，他又因为激动地大喊"回答我！"把麦克风震炸了。',dialog:'（小明看着手机里的游戏战绩，自言自语）"怎么不找找自己的问题呢...这把打完我要是能拿MVP就好了。"',options:[{text:"专心听课",next:2,hint:"做一个好学生",impact:{quest:{type:"study",value:10},relationship:{character:"王老师",value:5}}},{text:"继续研究剑魔连招",next:3,hint:"今晚一定要上王者",impact:{quest:{type:"gaming",value:10},relationship:{character:"王老师",value:-5}}},{text:"给李雪递纸条",next:4,hint:"要不要约她双排？",impact:{quest:{type:"social",value:5},relationship:{character:"李雪",value:10}}}],context:{mood:"焦虑",location:"教室",timeOfDay:"上午",previousEvents:["昨晚直播麦克风炸了","连续29天冲击王者失败"]},specialEvent:"王老师正在讲解一道高考压轴题，黑板上写满了公式。小明的手机里还在循环播放着昨晚的直播片段。"}}),actions:{setPlayerName(r){this.playerName=r},async startNewGame(){this.currentScene=this.initialScene,this.currentSceneId=1,this.gameLogs=[],this.addGameLog(1,"游戏开始")},async handleChoice(r){try{this.isGenerating=!0,this.aiErrorMessage="";const n=r.text;this.addGameLog(this.currentSceneId,n),r.impact&&this.processImpact(r.impact);const o=await re.generateScene({playerName:this.playerName,currentSceneId:this.currentSceneId,choiceText:n,currentScene:this.currentScene,storyProgress:this.storyProgress,streamCallbacks:{onReasoningUpdate:p=>{this.updateReasoningStream(p)},onDialogUpdate:p=>{this.updateDialogStream(p)}}});this.currentScene=o,this.currentSceneId=o.id}catch(n){console.error("处理选择时出错:",n),this.aiErrorMessage="生成场景失败: "+(n.message||"未知错误")}finally{this.isGenerating=!1}},processImpact(r){if(r.quest){const{type:n,value:o}=r.quest;n&&typeof o=="number"&&(n==="gaming"&&(this.storyProgress.mainQuests.gaming=Math.min(100,this.storyProgress.mainQuests.gaming+o)),n==="study"&&(this.storyProgress.mainQuests.study=Math.min(100,this.storyProgress.mainQuests.study+o)),n==="social"&&(this.storyProgress.mainQuests.social=Math.min(100,this.storyProgress.mainQuests.social+o)))}if(r.relationship){const{character:n,value:o}=r.relationship;if(n&&typeof o=="number"&&this.storyProgress.relationships[n]&&(this.storyProgress.relationships[n].affinity+=o,o!==0)){const p=o>0?"关系改善":"关系恶化";this.storyProgress.relationships[n].events.push(p)}}r.flag&&this.storyProgress.flags.add(r.flag)},updateReasoningStream(r){console.log("思维链更新:",r)},updateDialogStream(r){console.log("对话更新:",r)},addGameLog(r,n){this.gameLogs.push({sceneId:r,choiceText:n,timestamp:new Date().toISOString()})},resetGame(){this.currentScene=this.initialScene,this.currentSceneId=1,this.gameLogs=[],this.isGenerating=!1,this.aiErrorMessage="",this.storyProgress={mainQuests:{gaming:0,study:0,social:0},relationships:{李雪:{character:"李雪",affinity:0,events:[]},王老师:{character:"王老师",affinity:0,events:[]}},flags:new Set}}}}),ce={class:"min-h-screen bg-slate-50 bg-[radial-gradient(ellipse_80%_80%_at_50%_-20%,rgba(94,114,228,0.05),rgba(255,255,255,0))]"},pe={key:0,class:"max-w-5xl mx-auto px-6 py-12"},ve={class:"relative rounded-3xl overflow-hidden bg-white p-12 text-center min-h-[600px] shadow-lg shadow-indigo-100/50 border border-slate-100"},ge={class:"relative z-10 w-full max-w-md mx-auto mb-8"},me={class:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-slate-100 shadow-sm"},be={class:"space-y-4"},fe={class:"flex flex-wrap gap-2"},xe=["onClick"],he={class:"relative z-10 w-full max-w-md mx-auto"},ye={class:"bg-white/80 backdrop-blur-xl rounded-2xl p-8 border border-slate-100 shadow-sm"},we={class:"mb-8"},_e={class:"relative group"},ke=["disabled"],Ie={key:1,class:"max-w-5xl mx-auto px-6 py-12"},Se={class:"rounded-3xl overflow-hidden bg-white border border-slate-100 shadow-lg shadow-indigo-100/50"},Me={class:"bg-slate-50 border-b border-slate-100 p-6"},Ce={class:"flex items-center justify-between"},Pe={class:"flex items-center gap-4"},Ae={class:"text-lg font-bold text-slate-800"},Ne={class:"flex items-center gap-4"},Ge={class:"px-4 py-2 rounded-xl bg-slate-50 border border-slate-200 text-slate-700"},Qe={class:"p-8 space-y-6 bg-white"},Ue={class:"mb-6 border border-slate-100 rounded-2xl overflow-hidden bg-white"},Ve={class:"flex border-b border-slate-100"},je={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-indigo-500"},De={class:"flex items-center justify-center gap-2"},ze={key:0,class:"inline-flex items-center px-2 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-medium"},Be={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-purple-500"},Ee={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-red-500"},We={class:"p-6"},Je={key:0,class:"animate-fadeIn"},Te={class:"flex gap-4"},Le={key:0,class:"text-slate-600 italic"},Ze={class:"text-slate-600 italic"},Fe={key:1,class:"animate-fadeIn"},Ke={class:"flex gap-4"},Oe={key:0,class:"text-slate-600 italic"},Re={class:"text-slate-700 leading-relaxed"},qe={key:2,class:"animate-fadeIn"},$e={class:"bg-red-50 rounded-lg p-4 border border-red-100"},Ye={class:"flex items-start gap-3"},He={class:"font-bold text-red-700 flex items-center gap-2"},Xe={key:0},et={class:"text-red-600 mt-1 mb-2"},tt={key:0,class:"text-sm space-y-2 text-slate-700"},st={class:"bg-slate-50 rounded-2xl p-6 border border-slate-100 mb-6"},at={class:"text-slate-700 text-lg leading-relaxed"},lt={key:0,class:"relative overflow-hidden bg-slate-50 rounded-2xl p-6 border border-indigo-100 mb-6"},ot={class:"flex gap-4"},it={class:"text-slate-600"},nt={class:"grid grid-cols-3 gap-4 mb-6"},rt={class:"bg-white rounded-xl border border-slate-100 p-4"},dt={class:"w-full bg-slate-100 rounded-full h-2"},ut={class:"bg-white rounded-xl border border-slate-100 p-4"},ct={class:"w-full bg-slate-100 rounded-full h-2"},pt={class:"bg-white rounded-xl border border-slate-100 p-4"},vt={class:"w-full bg-slate-100 rounded-full h-2"},gt=["onClick"],mt={class:"relative bg-slate-50 rounded-2xl p-6 border border-slate-100 transform group-hover:-translate-y-1 transition-all duration-300 group-hover:shadow-md group-hover:shadow-indigo-100/50"},bt={class:"text-slate-700 font-medium mb-2"},ft={key:0,class:"text-slate-500 text-sm italic"},xt={class:"space-y-4"},ht={class:"text-lg font-medium text-slate-800"},yt={class:"mt-2 space-y-2"},wt={key:0,class:"flex items-start gap-2"},_t={key:1,class:"flex items-start gap-2"},kt={key:2,class:"flex items-start gap-2"},It={key:3,class:"flex items-start gap-2"},St={key:3,class:"fixed inset-0 bg-white/90 backdrop-blur-sm flex items-center justify-center z-50"},Mt={key:4,class:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50"},Ct={class:"relative"},Pt={class:"relative bg-white px-6 py-4 rounded-xl border border-red-100 text-red-500 flex items-center gap-3 shadow-lg shadow-red-100/50"},At={class:"font-medium"},Nt=Z({__name:"GiaoGame",props:{apiBaseUrl:{type:String,default:""}},setup(r){const n=r,o=ue(),p=c(""),V=c(!0),x=c(""),_=c("eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkMWRjMzFlLWI0ZDAtNDQ4Yi1hNzZmLWIwY2M2M2Q4MTQ5OCJ9.eyJhdWQiOiJ0ZXN0LWFwcDAtOWd5dXBrbWkxMGVkMjY1NCIsImV4cCI6MjUzNDAyMzAwNzk5LCJpYXQiOjE3NDI0MzY1NTIsImF0X2hhc2giOiJVVDF4a1FVd0VmQ0U5MUpVQUdrb2xRIiwicHJvamVjdF9pZCI6InRlc3QtYXBwMC05Z3l1cGttaTEwZWQyNjU0IiwibWV0YSI6eyJwbGF0Zm9ybSI6IkFwaUtleSJ9fQ.iJ2AlVeFSgyUP9K2ntHahG91TXtG57N86MT12UVpca7fWCZJ4Zqox5cdNJ3uj97DZbzN4q6wah0dZgVt_xqNZrMIvQMfgFc0uiA4gZiUOA6lJKgi33voC4dLWxqJ-_dYr_9XuHI6PPWW5Wy70jGotrVrrFFtUdxB0CJR3-mGHmlTemWMlDcIH3Ot7KZloBSTpC4MITr1i3xYSix8hHp_ClSf1ORKqAj7WXyBjwte7YBf8EIzehnlbpN_Z9sSwv8R_W4zcmEKAs_rTnWdTXGSFKLEl7lbHmpH3n5M4iRoGH9x3YVnZ8i8BXRMp6rBj2n2jqaIrcBrDJTd1ECGNF59tA"),g=c("deepseek-r1");c("story"),c("");const j=c(!1),k=c(!1),h=c(""),S=c(!1),y=c(""),M=c(!1),m=c({gaming:25,study:10,social:5});c([{role:"assistant",content:"欢迎来到 AI 互动游戏！请选择你想要的游戏模式，我们将开始一段奇妙的旅程。"}]);const D=c(!1),O={400:{title:"格式错误",reason:"请求体格式错误",solution:"请根据错误信息提示修改请求体"},401:{title:"认证失败",reason:"API key 错误，认证失败",solution:"请检查您的 API key 是否正确，如没有 API key，请先创建 API key"},402:{title:"余额不足",reason:"账号余额不足",solution:"请确认账户余额，并前往充值页面进行充值"},422:{title:"参数错误",reason:"请求体参数错误",solution:"请根据错误信息提示修改相关参数"},429:{title:"请求速率达到上限",reason:"请求速率（TPM 或 RPM）达到上限",solution:"请合理规划您的请求速率"},500:{title:"服务器故障",reason:"服务器内部故障",solution:"请等待后重试。若问题一直存在，请联系我们解决"},503:{title:"服务器繁忙",reason:"服务器负载过高",solution:"请稍后重试您的请求"}},b=c({show:!1,code:"",message:"",details:null}),d=c("dialog");se(()=>n.apiBaseUrl,s=>{s&&(x.value=s,P({baseUrl:s}),console.log("游戏组件: API地址已更新为",s))},{immediate:!0});const f=N(()=>o.currentScene),I=N(()=>o.isGenerating),z=N(()=>o.aiErrorMessage),B=s=>{g.value=s,P({baseUrl:x.value,apiKey:_.value,model:s}),console.log("模型已更新为:",s)},E=async()=>{if(!p.value){alert("请输入你的名字");return}x.value&&P({baseUrl:x.value,apiKey:_.value,model:g.value}),j.value=!0;try{o.setPlayerName(p.value),V.value=!1,await o.startNewGame(),$()}catch(s){console.error("游戏启动错误:",s),alert("游戏启动失败，请检查API设置或稍后再试")}finally{j.value=!1}},W=()=>{o.$onAction(({name:s,args:t})=>{s==="updateReasoningStream"&&t[0]&&(h.value+=t[0],g.value!=="deepseek-chat"&&h.value&&d.value==="dialog"&&(d.value="reasoning")),s==="updateDialogStream"&&t[0]&&(y.value+=t[0],y.value&&d.value==="reasoning"&&(d.value="dialog"))}),D.value=!0,console.log("已设置流式监听器")},R=async s=>{try{h.value="",y.value="",S.value=g.value!=="deepseek-chat",M.value=!0,J(),D.value||W(),s.impact&&q(s.impact),g.value==="deepseek-chat"?d.value="dialog":d.value="reasoning",await o.handleChoice(s),S.value=!1,M.value=!1}catch(t){console.error("处理选择时出错:",t),S.value=!1,M.value=!1,ee(t)}},q=s=>{if(s.quest){const{type:t,value:i}=s.quest;t==="gaming"&&(m.value.gaming=Math.min(100,m.value.gaming+i)),t==="study"&&(m.value.study=Math.min(100,m.value.study+i)),t==="social"&&(m.value.social=Math.min(100,m.value.social+i))}},$=()=>{m.value={gaming:o.storyProgress?.mainQuests?.gaming||25,study:o.storyProgress?.mainQuests?.study||10,social:o.storyProgress?.mainQuests?.social||5}},Y=()=>{confirm("确定要重置游戏进度吗？")&&(y.value="",o.resetGame(),m.value={gaming:25,study:10,social:5})},H=()=>{k.value=!k.value},X=()=>{const s=["deepseek-r1","deepseek-chat","QwQ-32B"],i=(s.indexOf(g.value)+1)%s.length;B(s[i]),k.value=!1},A=s=>{d.value=s},ee=s=>{if(s?.response?.status){const t=s.response.status.toString();b.value={show:!0,code:t,message:s.message||"未知错误",details:O[t]||null},d.value="error"}else b.value={show:!0,code:"UNKNOWN",message:s.message||"未知错误",details:null},d.value="error"},J=()=>{b.value.show=!1,d.value==="error"&&(d.value="dialog")};return F(()=>{n.apiBaseUrl?x.value=n.apiBaseUrl:x.value="https://test-app0-9gyupkmi10ed2654.api.tcloudbasegateway.com/v1/ai/deepseek/v1",P({baseUrl:x.value,apiKey:_.value,model:g.value}),W()}),(s,t)=>(l(),a("div",ce,[f.value?(l(),a("div",Ie,[e("div",Se,[e("div",Me,[e("div",Ce,[e("div",Pe,[t[16]||(t[16]=e("div",{class:"w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 to-blue-500 p-[1px]"},[e("div",{class:"w-full h-full rounded-[10px] bg-white flex items-center justify-center"},[e("span",{class:"text-2xl"},"⚔️")])],-1)),e("div",null,[e("div",Ae,v(p.value),1),t[15]||(t[15]=e("div",{class:"text-sm text-slate-500"},"见习剑客",-1))])]),e("div",Ne,[e("div",Ge," 第 "+v(f.value.id)+" 章 ",1),e("button",{onClick:H,class:w(["px-4 py-2 rounded-xl border transition-colors duration-200",[g.value==="deepseek-r1"?"bg-purple-50 text-purple-700 border-purple-200":"bg-blue-50 text-blue-700 border-blue-200"]])},v(g.value),3),e("button",{onClick:Y,class:"group px-4 py-2 rounded-xl bg-slate-50 border border-slate-200 text-slate-700 hover:bg-slate-100 transition-all duration-300"},t[17]||(t[17]=[e("span",{class:"flex items-center gap-2"},[e("span",{class:"text-lg group-hover:rotate-180 transition-transform duration-500"},"🔄"),e("span",{class:"hidden sm:inline"},"重新开始")],-1)]))])])]),e("div",Qe,[e("div",Ue,[e("div",Ve,[e("button",{onClick:t[3]||(t[3]=i=>A("dialog")),class:w(["flex-1 py-3 text-sm font-medium transition-colors duration-200 relative",d.value==="dialog"?"text-indigo-600 bg-indigo-50/50":"text-slate-600 hover:text-slate-800 hover:bg-slate-50"])},[t[18]||(t[18]=e("span",{class:"flex items-center justify-center gap-2"},[e("span",{class:"text-lg"},"💭"),e("span",null,"对话内容")],-1)),d.value==="dialog"?(l(),a("span",je)):u("",!0)],2),g.value!=="deepseek-chat"?(l(),a("button",{key:0,onClick:t[4]||(t[4]=i=>A("reasoning")),class:w(["flex-1 py-3 text-sm font-medium transition-colors duration-200 relative",d.value==="reasoning"?"text-purple-600 bg-purple-50/50":"text-slate-600 hover:text-slate-800 hover:bg-slate-50"])},[e("span",De,[t[20]||(t[20]=e("span",{class:"text-lg"},"🤔",-1)),t[21]||(t[21]=e("span",null,"思维过程",-1)),S.value&&!h.value?(l(),a("span",ze,t[19]||(t[19]=[le(" 思考中 "),e("span",{class:"ml-1 flex space-x-1"},[e("span",{class:"w-1 h-1 bg-purple-700 rounded-full animate-bounce",style:{"animation-delay":"0s"}}),e("span",{class:"w-1 h-1 bg-purple-700 rounded-full animate-bounce",style:{"animation-delay":"0.1s"}}),e("span",{class:"w-1 h-1 bg-purple-700 rounded-full animate-bounce",style:{"animation-delay":"0.2s"}})],-1)]))):u("",!0)]),d.value==="reasoning"?(l(),a("span",Be)):u("",!0)],2)):u("",!0),b.value.show?(l(),a("button",{key:1,onClick:t[5]||(t[5]=i=>A("error")),class:w(["flex-1 py-3 text-sm font-medium transition-colors duration-200 relative",d.value==="error"?"text-red-600 bg-red-50/50":"text-slate-600 hover:text-slate-800 hover:bg-slate-50"])},[t[22]||(t[22]=e("span",{class:"flex items-center justify-center gap-2"},[e("span",{class:"text-lg"},"⚠️"),e("span",null,"错误信息")],-1)),d.value==="error"?(l(),a("span",Ee)):u("",!0)],2)):u("",!0)]),e("div",We,[d.value==="dialog"?(l(),a("div",Je,[e("div",Te,[t[24]||(t[24]=e("div",{class:"text-2xl shrink-0"},"💭",-1)),I.value&&!y.value?(l(),a("div",Le,t[23]||(t[23]=[C('<div class="flex items-center text-slate-500" data-v-70fd8bee><span data-v-70fd8bee>AI正在生成对话</span><span class="ml-2 flex space-x-1" data-v-70fd8bee><span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay:0s;" data-v-70fd8bee></span><span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay:0.1s;" data-v-70fd8bee></span><span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-70fd8bee></span></span></div>',1)]))):u("",!0),e("p",Ze,v(y.value||(f.value?f.value.dialog:"")),1)])])):d.value==="reasoning"?(l(),a("div",Fe,[e("div",Ke,[t[26]||(t[26]=e("div",{class:"text-2xl shrink-0"},"🤔",-1)),I.value&&!h.value?(l(),a("div",Oe,t[25]||(t[25]=[C('<div class="flex items-center text-slate-500" data-v-70fd8bee><span data-v-70fd8bee>AI正在生成思维过程</span><span class="ml-2 flex space-x-1" data-v-70fd8bee><span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay:0s;" data-v-70fd8bee></span><span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay:0.1s;" data-v-70fd8bee></span><span class="w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-70fd8bee></span></span></div>',1)]))):u("",!0),e("p",Re,v(h.value||(f.value?f.value.reasoning:"")),1)])])):d.value==="error"?(l(),a("div",qe,[e("div",$e,[e("div",Ye,[t[29]||(t[29]=e("div",{class:"text-2xl text-red-500 shrink-0"},"⚠️",-1)),e("div",null,[e("h3",He,[e("span",null,"错误 "+v(b.value.code),1),b.value.details?(l(),a("span",Xe,"- "+v(b.value.details.title),1)):u("",!0)]),e("p",et,v(b.value.message),1),b.value.details?(l(),a("div",tt,[e("p",null,[t[27]||(t[27]=e("span",{class:"font-medium"},"原因：",-1)),e("span",null,v(b.value.details.reason),1)]),e("p",null,[t[28]||(t[28]=e("span",{class:"font-medium"},"解决方法：",-1)),e("span",null,v(b.value.details.solution),1)])])):u("",!0),e("div",{class:"mt-4"},[e("button",{onClick:J,class:"px-3 py-1 text-xs rounded bg-red-100 text-red-700 hover:bg-red-200 transition-colors"}," 关闭错误提示 ")])])])])])):u("",!0)])]),e("div",st,[e("p",at,v(f.value.description),1)]),f.value.specialEvent?(l(),a("div",lt,[t[32]||(t[32]=e("div",{class:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-indigo-200 to-blue-200"},null,-1)),e("div",ot,[t[31]||(t[31]=e("div",{class:"text-2xl"},"⚡",-1)),e("div",null,[t[30]||(t[30]=e("h3",{class:"font-bold text-slate-800 mb-2"},"特殊事件",-1)),e("p",it,v(f.value.specialEvent),1)])])])):u("",!0),e("div",nt,[e("div",rt,[t[33]||(t[33]=e("div",{class:"text-sm text-slate-500 mb-1"},"游戏技能",-1)),e("div",dt,[e("div",{class:"bg-blue-500 h-2 rounded-full",style:U(`width: ${m.value.gaming}%`)},null,4)])]),e("div",ut,[t[34]||(t[34]=e("div",{class:"text-sm text-slate-500 mb-1"},"学习能力",-1)),e("div",ct,[e("div",{class:"bg-green-500 h-2 rounded-full",style:U(`width: ${m.value.study}%`)},null,4)])]),e("div",pt,[t[35]||(t[35]=e("div",{class:"text-sm text-slate-500 mb-1"},"社交关系",-1)),e("div",vt,[e("div",{class:"bg-purple-500 h-2 rounded-full",style:U(`width: ${m.value.social}%`)},null,4)])])]),e("div",{class:w(["space-y-4",{"opacity-50 pointer-events-none":I.value}])},[(l(!0),a(T,null,L(f.value.options,i=>(l(),a("div",{key:i.text,class:"group cursor-pointer relative overflow-hidden",onClick:te=>!I.value&&R(i)},[t[36]||(t[36]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-indigo-50 to-blue-50 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),e("div",mt,[e("div",bt,v(i.text),1),i.hint?(l(),a("div",ft,v(i.hint),1)):u("",!0)])],8,gt))),128))],2)])])])):(l(),a("div",pe,[e("div",ve,[t[14]||(t[14]=C('<div class="absolute inset-0 bg-[radial-gradient(circle_at_50%_120%,rgba(94,114,228,0.05),rgba(255,255,255,0))]" data-v-70fd8bee></div><div class="absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-indigo-100 to-transparent" data-v-70fd8bee></div><div class="relative z-10 mb-16" data-v-70fd8bee><div class="inline-block" data-v-70fd8bee><div class="relative" data-v-70fd8bee><h1 class="text-5xl sm:text-6xl font-bold text-slate-800 pb-2 tracking-tight" data-v-70fd8bee> 最强剑魔是高三生 </h1><div class="absolute -bottom-2 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-indigo-200 to-transparent" data-v-70fd8bee></div></div><p class="mt-6 text-lg text-slate-500" data-v-70fd8bee>一段关于剑道、学业与青春的传奇</p></div></div>',3)),e("div",ge,[e("div",me,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-slate-700 mb-4"},"API 设置",-1)),e("div",be,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm text-slate-600 mb-1"},"API 地址",-1)),G(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>x.value=i),type:"text",placeholder:"请输入API地址",class:"w-full px-4 py-2 bg-slate-50 rounded-lg border border-slate-200 text-slate-700 text-sm focus:outline-none focus:border-indigo-200 focus:ring-2 focus:ring-indigo-100"},null,512),[[Q,x.value]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm text-slate-600 mb-1"},"API key",-1)),G(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>_.value=i),type:"password",placeholder:"没有可以去deepseek官网注册",class:"w-full px-4 py-2 bg-slate-50 rounded-lg border border-slate-200 text-slate-700 text-sm focus:outline-none focus:border-indigo-200 focus:ring-2 focus:ring-indigo-100"},null,512),[[Q,_.value]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm text-slate-600 mb-1"},"模型选择",-1)),e("div",fe,[(l(),a(T,null,L(["deepseek-r1","deepseek-chat","QwQ-32B"],i=>e("button",{key:i,onClick:te=>B(i),class:w(["px-3 py-1 text-sm rounded-md transition-colors duration-200",g.value===i?"bg-indigo-100 text-indigo-700 border border-indigo-200":"bg-slate-50 text-slate-600 border border-slate-200 hover:bg-slate-100"])},v(i),11,xe)),64))])])])])]),e("div",he,[e("div",ye,[e("div",we,[e("div",_e,[G(e("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>p.value=i),type:"text",placeholder:"输入你的名字，剑客",class:"w-full px-14 py-4 bg-slate-50 rounded-xl border border-slate-200 text-slate-700 placeholder-slate-400 focus:outline-none focus:border-indigo-200 focus:ring-2 focus:ring-indigo-100 transition-all duration-300",onKeyup:ae(E,["enter"])},null,544),[[Q,p.value]]),t[12]||(t[12]=e("span",{class:"absolute left-5 top-1/2 -translate-y-1/2 text-2xl text-slate-400 group-focus-within:text-indigo-400 transition-colors duration-300"},"⚔️",-1))])]),e("button",{onClick:E,disabled:!p.value,class:"relative w-full group"},t[13]||(t[13]=[e("div",{class:"relative bg-gradient-to-r from-indigo-500 to-blue-500 rounded-xl px-6 py-4 text-white font-medium transform group-hover:-translate-y-1 group-active:translate-y-0 transition-all duration-300 shadow-md shadow-indigo-100"},[e("span",{class:"flex items-center justify-center gap-3"},[e("span",{class:"text-lg"},"开启传奇"),e("span",{class:"text-xl"},"🗡️")])],-1)]),8,ke)])])])])),k.value?(l(),a("div",{key:2,class:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50",onClick:t[7]||(t[7]=i=>k.value=!1)},[e("div",{class:"relative bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-xl",onClick:t[6]||(t[6]=oe(()=>{},["stop"]))},[t[44]||(t[44]=e("h2",{class:"text-2xl font-bold text-slate-800 mb-4"},"AI模型信息",-1)),e("div",xt,[e("div",null,[t[37]||(t[37]=e("h3",{class:"text-sm font-medium text-slate-500"},"当前模型",-1)),e("p",ht,v(g.value),1)]),e("div",null,[t[43]||(t[43]=e("h3",{class:"text-sm font-medium text-slate-500"},"模型特点",-1)),e("ul",yt,[g.value==="deepseek-r1"?(l(),a("li",wt,t[38]||(t[38]=[e("span",{class:"text-purple-500 mt-0.5"},"✓",-1),e("span",{class:"text-slate-700"},"支持思维链展示，可观察AI思考过程",-1)]))):u("",!0),g.value==="deepseek-r1"?(l(),a("li",_t,t[39]||(t[39]=[e("span",{class:"text-purple-500 mt-0.5"},"✓",-1),e("span",{class:"text-slate-700"},"更强的推理和剧情架构能力",-1)]))):u("",!0),g.value==="deepseek-chat"?(l(),a("li",kt,t[40]||(t[40]=[e("span",{class:"text-blue-500 mt-0.5"},"✓",-1),e("span",{class:"text-slate-700"},"更流畅的对话体验",-1)]))):u("",!0),g.value==="QwQ-32B"?(l(),a("li",It,t[41]||(t[41]=[e("span",{class:"text-blue-500 mt-0.5"},"✓",-1),e("span",{class:"text-slate-700"},"更大模型参数，知识面更广",-1)]))):u("",!0),t[42]||(t[42]=e("li",{class:"flex items-start gap-2"},[e("span",{class:"text-green-500 mt-0.5"},"✓"),e("span",{class:"text-slate-700"},"实时流式生成，响应更快")],-1))])]),e("div",{class:"pt-4"},[e("button",{onClick:X,class:"w-full py-3 bg-gradient-to-r from-indigo-500 to-blue-500 text-white rounded-xl font-medium"}," 切换模型 ")])])])])):u("",!0),I.value&&!M.value?(l(),a("div",St,t[45]||(t[45]=[C('<div class="relative" data-v-70fd8bee><div class="relative bg-white rounded-2xl p-8 border border-slate-100 shadow-lg shadow-indigo-100/50" data-v-70fd8bee><div class="w-16 h-16 mx-auto mb-4" data-v-70fd8bee><svg class="animate-spin w-full h-full text-indigo-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-70fd8bee><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-70fd8bee></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-70fd8bee></path></svg></div><p class="text-slate-800 text-lg font-medium text-center" data-v-70fd8bee>正在书写剧情...</p></div></div>',1)]))):u("",!0),z.value?(l(),a("div",Mt,[e("div",Ct,[e("div",Pt,[t[46]||(t[46]=e("span",{class:"text-xl"},"❌",-1)),e("span",At,v(z.value),1)])])])):u("",!0)]))}}),Gt=K(Nt,[["__scopeId","data-v-70fd8bee"]]),Qt={class:"game-view-container"},Ut=Z({__name:"GameView",setup(r){const n=de(),o=c(n.apiUrl);return F(()=>{const p=localStorage.getItem("apiUrl");p&&(o.value=p,n.setApiUrl(p))}),(p,V)=>(l(),a("div",Qt,[ie(Gt,{"api-base-url":o.value},null,8,["api-base-url"])]))}}),Et=K(Ut,[["__scopeId","data-v-d88ade8b"]]);export{Et as default};
